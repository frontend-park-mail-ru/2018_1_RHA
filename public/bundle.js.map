{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./public/js/modules/bus.js","webpack:///./public/js/modules/userModel.js","webpack:///./public/js/components/views/baseView.js","webpack:///./public/js/modules/router.js","webpack:///./public/js/components/blocks/input/input.js","webpack:///./public/js/modules/game/config/playerStates.js","webpack:///./public/js/components/forms/form.js","webpack:///./public/js/modules/validator.js","webpack:///./public/js/components/blocks/block.js","webpack:///./public/js/conf/route.js","webpack:///./public/js/modules/game/player/botPlayer.js","webpack:///./public/js/modules/game/helperFuncs/renderScene.js","webpack:///./public/js/modules/game/player/player.js","webpack:///./public/js/modules/game/player/mainPlayer.js","webpack:///./public/js/components/blocks/button.js","webpack:///./public/js/modules/http.js","webpack:///./public/js/modules/game/config/coordinate.js","webpack:///./public/js/modules/game/helperFuncs/renderInfoAboutRegion.js","webpack:///./public/js/modules/game/math/inHex.js","webpack:///./public/js/modules/game/gameScene.js","webpack:///./public/js/modules/game/controller.js","webpack:///./public/js/modules/game/helperFuncs/battleCalc.js","webpack:///./public/js/modules/game/helperFuncs/timer.js","webpack:///./public/js/modules/game/gameManager.js","webpack:///./public/js/modules/game/config/reach.js","webpack:///./public/js/modules/graphics/hexagon.js","webpack:///./public/js/modules/game/components/region.js","webpack:///./public/js/modules/game/math/getRandom.js","webpack:///./public/js/modules/game/game.js","webpack:///./public/js/components/views/gameView/gameView.js","webpack:///./public/js/components/views/menuView/menuView.js","webpack:///./public/js/components/forms/loginForm.js","webpack:///./public/js/components/views/loginView/loginView.js","webpack:///./public/js/components/forms/registerForm.js","webpack:///./public/js/components/views/registerView/registerView.js","webpack:///./public/js/modules/userController.js","webpack:///./public/js/components/views/ratingView/ratingView.js","webpack:///./public/js/components/forms/loadPictureForm/loadPictureForm.js","webpack:///./public/js/components/render/render.js","webpack:///./public/js/modules/sectionSwitcher.js","webpack:///./public/js/components/forms/changeForm.js","webpack:///./public/js/components/views/profileView/profileView.js","webpack:///./public/js/application.js","webpack:///./public/js/components/radar/radar.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Bus","_classCallCheck","this","__instance","listeners","event","listener","_this","push","off","Array","isArray","filter","element","payload","forEach","curUser","User","data","email","rating","Promise","resolve","reject","_http2","default","_route2","userAPIMethods","user","err","resp","status","then","promiseValue","userData","post","login","console","log","auth","signup","logout","updateUser","updateAvatar","_userModel","Section","_userModel2","isAuthorized","_sectionSwitcher","Router","root","global","startRoot","document","getElementById","gameRoot","map","active","path","View","view","rootForSwitch","hidden","allowed","window","history","replaceState","open","location","pathname","pushState","sectionSwitcher","changeSection","render","addEventListener","bind","evt","target","tagName","toLowerCase","preventDefault","href","_block","Input","_possibleConstructorReturn","__proto__","getPrototypeOf","wrapper","createElement","CLASS","type","innerHTML","generateInput","placeholder","id","error_id","concat","ErrorElement","getElementsByTagName","InputElement","error","classList","add","style","display","remove","callbackfn","DEFAULT","READY","DISABLED","WON","LOSE","Form","formElement","reset","Validator","emailElem","getData","test","setError","nameElem","passElem","length","confElem","Block","serverUrl","leaderBoard","BotPlayer","color","_this2","_bus2","on","dict","attackers","regions","neighbour","attacker","_getRandom2","emit","from","to","_bus","renderScene","canvas","img","ctx","getContext","clearRect","width","height","drawImage","region","renderHex","_playerStates","_renderScene","Player","score","resources","_playerStates2","newRegion","area","setColor","owner","reg","splice","MainPlayer","Button","parent","buttonWrapper","buttonElement","appendChild","_route","HttpService","url","request","response","json","body","requestMethod","headers","Headers","append","req","method","credentials","mode","fetch","amountofCoorX","amountofCoorY","Coordinate","game_canvas","xSize","ySize","lengthSide","allowedCoord","x","y","aboutRegion","curRegion","domElem","innerText","gameData","units","xp","yp","npol","j","_renderInfoAboutRegion","GameScene","players","game_ctx","about_region","setPlayersRegions","curP","currentPlayer","_inHex2","current","label","selected","player","addRegion","switcher","arrX","arrY","curPlayer","coordinates","isRegion","isTheRegionOfPlayer","activeRegion","new","isNeighbour","nextPlayer","next","regs","cur","Controller","changeBut","onclick","offsetX","offsetY","mousemove","contextmenu","clickChangeBut","removeEventListener","battleCalc","firstRegion","secondRegion","timer","htmlElement","sec","g","setInterval","clearInterval","_timer","_battleCalc","GameManager","controller","setStroke","getColor","delRegion","setStatus","_mainPlayer2","start","_botPlayer2","stop","reDraw","reachMatrix","Hexagon","xC","yC","coordinate","draw","strokeColor","R","dR","beginPath","lineJoin","lineWidth","moveTo","lineTo","strokeStyle","stroke","fillStyle","fill","closePath","_reach","Region","allowedCoordinates","setBusListeners","globalRegions","number","init","_hexagon2","num","temp","removeNeighbour","f","_this3","min","max","Math","floor","random","Game","_controller2","arr","_region2","setGlobalRegions","scene","_gameScene2","manager","_gameManager2","onListeners","destroy","GameSection","screen","documentElement","clientWidth","generateCanvas","innerWidth","Image","src","onload","_coordinate2","setWindowResizeHandler","getElementsByClassName","game","_game2","_computeCanvasSize","computeCanvasSize","_computeCanvasSize2","_slicedToArray","reSize","MenuSection","sign","menu","attrsActive","title","attrPassive","generateMenu","attrs","setAttribute","e","logoutWrapper","allow","_router2","hide","LoginForm","Email","password","Password","_input2","InputSubmit","setOnInputChange","_validator2","checkMail","checkPass","ev","LoginSection","generateLogin","after","loginForm","_loginForm2","firstChild","insertBefore","setOnSubmit","jsonUserData","JSON","stringify","RegisterForm","Name","ConfirmPassword","checkName","checkConfirm","username","RegisterSection","register","generateRegister","registerForm","_registerForm2","userController","UserController","signUp","catch","signIn","update","avatar","uploadAvatar","page","toString","RatingSection","paginationWrap","prevButt","removeChild","nextButt","load","empty","lastPage","backButtWrap","backButt","_userController2","users","table","generateRating","pages","_this4","LoadForm","UploadInput","getFormData","UploadSubmit","child","_render","SectionSwitcher","newSection","rootForElement","_render2","ChangeForm","oldp","OldPassword","newp","RepeatPassword","ProfileSection","profileElement","getCurUser","profileTable","generateProfile","fileForm","_loadPictureForm2","changeForm","_changeForm2","_button2","setOnClick","file","formData","FormData","upload","files","globalRoot","_menuView2","_registerView2","_profileView2","_ratingView2","_loginView2","_gameView2","radar","diameter","offsetHeight","offsetWidth","radius","Sketch","create","container","fullscreen","dToR","degrees","PI","sweepAngle","hueDiff","abs","hueEnd","gradient","createLinearGradient","marginLeft","marginTop","addColorStop","clear","globalCompositeOperation","fillRect","arc","TWO_PI","renderRings","save","translate","rotate","restore","renderScanLines"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 72);\n","'use strict';\n\n/**\n * Модуль event-bus медиатора\n * @module EventBus\n */\nclass Bus {\n\t/**\n     * @constructor\n     */\n\tconstructor() {\n\t\tif (Bus.__instance) {\n\t\t\treturn Bus.__instance;\n\t\t}\n\t\tthis.listeners = {};\n\t\tBus.__instance = this;\n\t}\n\n\t/**\n     * Зарегистрировать обработчик события\n     * @param {string} event - название события\n     * @param {function} listener - обработчик события\n     * @return {function(this:Bus)} - функция отписки от события\n     */\n\ton(event, listener) {\n\t\tthis.listeners[event] = this.listeners[event] || [];\n\t\tthis.listeners[event].push(listener);\n\t\treturn (() => {\n\t\t\tthis.off(event, listener);\n\t\t});\n\t}\n\n\t/**\n     * Отписаться от события\n     * @param {string} event - название события\n     * @param {function} listener - обработчик события\n     */\n\toff(event, listener) {\n\t\tif (Array.isArray(this.listeners[event])) {\n\t\t\tthis.listeners[event] = this.listeners[event]\n\t\t\t\t.filter((element) => {\n\t\t\t\t\treturn element !== listener;\n\t\t\t\t});\n\t\t}\n\t}\n\n\n\t/**\n     * Заэмиттить событие\n     * @param {string} event - название события\n     * @param {*} [payload] - объект с данными\n     */\n\temit(event, payload) {\n\t\tif (Array.isArray(this.listeners[event])) {\n\t\t\tthis.listeners[event].forEach((listener) => {\n\t\t\t\tlistener({\n\t\t\t\t\tevent: event,\n\t\t\t\t\tpayload: payload,\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport default new Bus();\n","import http from './http.js';\nimport route from '../conf/route.js';\n\n/**\n * Class represents Model of User to store and manage user data\n */\nlet curUser = null;\nexport default class User {\n\t/**\n     * Creates user and loads user data\n     */\n\tconstructor(data) {\n\t\tthis.email = data.email;\n\t\tthis.rating = data.rating;\n\t}\n\n\t/**\n\t * Authenticates user\n\t * @return {Promise<any>}\n\t */\n\tstatic auth() {\n\t\t// if (curUser) {\n\t\t//     resolve(curUser);\n\t\t// }\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\thttp.get(route.userAPIMethods.user, (err, resp) => {\n\t\t\t\tif (err) {\n\t\t\t\t\tif (err.status === 401) {\n\t\t\t\t\t\tcurUser = null;\n\t\t\t\t\t\treturn resolve(null);\n\t\t\t\t\t}\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\tresp.then(\n\t\t\t\t\tpromiseValue => {\n\t\t\t\t\t\tcurUser = new User(promiseValue.data);\n\t\t\t\t\t\tresolve(curUser);\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * If user authorized\n\t * @return {boolean}\n\t */\n\tstatic isAuthorized() {\n\t\treturn !!curUser;\n\t}\n\n\t/**\n\t * Returns current user\n\t * @return {User}\n\t */\n\tstatic getCurUser() {\n\t\treturn curUser;\n\t}\n\n\t/**\n\t * Signs user in\n\t * @param userData\n\t * @return {Promise<any>}\n\t */\n\tstatic signIn(userData) {\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\thttp.post(route.userAPIMethods.login, userData, (err, resp) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\tconsole.log(resp);\n\t\t\t\tresolve(User.auth());\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * signs user Up\n\t * @param userData\n\t * @return {Promise<any>}\n\t */\n\tstatic signUp(userData) {\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\thttp.post(route.userAPIMethods.signup, userData, (err, resp) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\tconsole.log(resp);\n\t\t\t\tresolve(User.auth());\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * logs user Off\n\t * @return {Promise<any>}\n\t */\n\tstatic logout() {\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\thttp.post(route.userAPIMethods.logout, {}, (err, resp) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\tconsole.log(resp);\n\t\t\t\tresolve(User.auth());\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * updates user data\n\t * @param userData\n\t * @return {Promise<any>}\n\t */\n\tstatic update(userData) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\thttp.post(route.userAPIMethods.updateUser, userData, (err, resp) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\tconsole.log(resp);\n\t\t\t\tresolve(User.auth());\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * uploads user's avatar\n\t * @param userData\n\t * @return {Promise<any>}\n\t */\n\tstatic uploadAvatar(userData) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\thttp.post(route.userAPIMethods.updateAvatar, userData, (err, resp) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\tconsole.log(resp);\n\t\t\t});\n\t\t});\n\t}\n}","import User from '../../modules/userModel.js';\n\n/**\n * Class represents generic Section\n */\nexport default class Section {\n\tconstructor() {\n\t\tUser.isAuthorized();\n\t}\n\n\t/**\n     * Should be overriden\n     */\n\trender() {\n\t}\n\n\tallowed() {\n\t\treturn false;\n\t}\n\n\n}\n","import {sectionSwitcher} from './sectionSwitcher.js';\n\n/**\n * Class representing router\n */\nexport default class Router {\n\n\t/**\n\t * Creates router\n\t * @param root\n\t * @param global\n\t * @return {Router|*}\n\t */\n\tconstructor(root, global) {\n\n\t\tif (Router.__instance) {\n\t\t\treturn Router.__instance;\n\t\t}\n\n\t\tthis.root = root;\n\t\tthis.startRoot = document.getElementById('start');\n\t\tthis.gameRoot = document.getElementById('game');\n\t\tthis.map = {};\n\t\tthis.global = global;\n\t\tthis.active = null;\n\n\t\tRouter.__instance = this;\n\t}\n\n\t/**\n\t * adds new page to router\n\t * @param path\n\t * @param View\n\t * @return {Router}\n\t */\n\tadd(path, View) {\n\t\tthis.map[path] = new View(this.root);\n\t\treturn this;\n\t}\n\n\t/**\n\t * opens the page\n\t * @param path\n\t */\n\topen(path) {\n\t\tconsole.log('open');\n\t\tconst view = this.map[path];\n\t\tlet rootForSwitch;\n\t\tif (path === '/singleplayer' ) {\n\t\t\tconsole.log('if');\n\t\t\trootForSwitch =  this.gameRoot;\n\t\t\tthis.startRoot.hidden = true;\n\t\t\trootForSwitch.hidden = false;\n\t\t} else {\n\t\t\tconsole.log('else');\n\t\t\trootForSwitch = this.root;\n\t\t\tthis.startRoot.hidden = false;\n\t\t\tthis.gameRoot.hidden = true;\n\t\t}\n\n\t\tconsole.log('view ', path, 'is allowed: ', view.allowed());\n\t\tif (!view.allowed()) {\n\t\t\twindow.history.replaceState(null, '', '/');\n\t\t\tthis.open('/');\n\t\t\treturn;\n\t\t}\n\t\tif (window.location.pathname !== path) {\n\t\t\twindow.history.pushState(null, '', path);\n\t\t}\n\n\t\t// if (path === '/game') {\n\t\t// \tsectionSwitcher.changeSection(view.render(), this.global);\n\t\t// }\n\t\tsectionSwitcher.changeSection(view.render(), rootForSwitch);\n\t}\n\n\t/**\n\t * Starts the router\n\t */\n\tstart() {\n\t\twindow.addEventListener('popstate', function () {\n\t\t\tthis.open(window.location.pathname);\n\t\t}.bind(this));\n\n\t\tthis.root.addEventListener('click', function (evt) {\n\t\t\tif (evt.target.tagName.toLowerCase() === 'a') {\n\t\t\t\tevt.preventDefault();\n\t\t\t\twindow.history.pushState(null, '', evt.target.href);\n\t\t\t\tthis.open(evt.target.pathname);\n\t\t\t}\n\t\t}.bind(this));\n\t\tconsole.log(window.location.pathname);\n\t\tthis.open(window.location.pathname);\n\t}\n}","/* eslint-disable no-undef */\nimport Block from '../block.js';\n/** Class representing Input */\nexport default class Input extends Block {\n\t/**\n     * Creates input\n     * @param {object} data – contains type, value and placeholder\n     */\n\tconstructor(data) {\n\t\tsuper();\n\n\t\t// this.InputElement = document.createElement('input');\n\t\t// this.InputElement.type = data.type;\n\t\t// if(data.type === 'submit') {\n\t\t// \tthis.InputElement.value = data.value;\n\t\t// \tthis.InputElement.classList.add('button');\n\t\t// }\n\t\t// else {\n\t\t// \tthis.InputElement.placeholder = data.placeholder;\n\t\t// \tthis.InputElement.classList.add('input');\n\t\t// }\n\t\t//\n\t\t// this.InputWrapper = document.createElement('div');\n\t\t// this.InputWrapper.appendChild(this.InputElement);\n\t\t//\n\t\tthis.status = true; //заглушка\n\t\t//\n\t\t// this.ErrorElement = document.createElement('div');\n\t\t// this.ErrorElement.classList.add('error');\n\t\t// this.lamp = document.createElement('div');\n\t\t// this.lamp.innerHTML = generateLamp();\n\t\t// this.InputWrapper.appendChild(this.lamp);\n\t\t// this.InputWrapper.appendChild(this.ErrorElement);\n\t\t//\n\t\t//\n\t\tthis.wrapper = document.createElement('div');\n\t\t//TODO здесь надо указать все типы инпутов, которым не нужна лампа\n\n\t\tlet CLASS = 'input';\n\t\tif (data.type === 'submit') {\n\t\t\tCLASS = 'button';\n\t\t}\n\t\tthis.wrapper.innerHTML += generateInput({\n\t\t\ttype: data.type,\n\t\t\tplaceholder: data.placeholder,\n\t\t\tvalue: data.value,\n\t\t\tid: data.id,\n\t\t\terror_id: data.id.concat('_error'),\n\t\t\tCLASS: CLASS\n\t\t});\n\t\tthis.ErrorElement = this.wrapper.getElementsByTagName('div')[0];\n\t\tthis.InputElement = this.wrapper.getElementsByTagName('input')[0];\n\t}\n\n\t/**\n     * Returns input DOM element\n     * @return {HTMLDivElement | *}\n     */\n\trender() {\n\t\treturn this.wrapper;\n\t}\n\n\t/**\n     * For validation process\n     * @return {boolean} – true if valid\n     */\n\tgetState() {\n\t\treturn this.status;\n\t}\n\n\t/**\n     * Returns input data\n     * @return {string}\n     */\n\tgetData() {\n\t\treturn this.InputElement.value;\n\t}\n\tgetFormData() {\n\t\treturn this.InputElement;\n\t}\n\n\t/**\n     * To set error message or unset error\n     * @param {string} error\n     */\n\tsetError(error) {\n\t\tif (error) {\n\t\t\tthis.status = false;\n\t\t\tthis.ErrorElement.innerHTML = error;\n\t\t\tthis.InputElement.classList.add('input__error');\n\t\t} else {\n\t\t\tthis.status = true;\n\t\t\tthis.ErrorElement.style.display = 'none';\n\t\t\tthis.InputElement.classList.remove('input__error');\n\t\t}\n\t}\n\n\n\t//TODO: в качестве коллбека можешь передать методы валидатора, тогда ему будут видны поля этого класса\n\t/**\n     * Defines behaviour on change\n     * @param {function} callbackfn – input data change handler\n     */\n\tsetOnInputChange(callbackfn) {\n\t\tthis.InputElement.addEventListener('change', (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tcallbackfn();\n\t\t});\n\t}\n}","/**\n * for player management\n * @type {{DEFAULT: number, READY: number, DISABLED: number, WON: number, LOSE: number}}\n */\nconst PLAYER_STATES = {\n\tDEFAULT : 1,\n\tREADY : 2,\n\tDISABLED : 3,\n\tWON : 4,\n\tLOSE: 5\n};\nexport default PLAYER_STATES;","import Block from '../blocks/block.js';\n\n/** Class representing generic form */\nexport default class Form extends Block {\n\t/**\n     * Create a form\n     */\n\tconstructor() {\n\t\tsuper();\n\t\tthis.formElement = document.createElement('form');\n\t}\n\n\t/**\n     * should be overriden\n     */\n\trender() {\n\n\t}\n\n\t/**\n     * to reset form data\n     */\n\treset() {\n\t\tthis.formElement.reset();\n\t}\n\n\t/**\n     * should be overriden\n     */\n\tsetOnSubmit() {\n\t}\n\n\t//TODO после сабмита пробежишься по всем инпутам и проверяешь их стейты\n\t//TODO если что-то не так, то тогда от компоненты вызываешь setError, который должен разхидить errorElement\n}","/**\n * Class represents set of tools to validate forms\n */\nexport default class Validator {\n\n\t/**\n     * Validation of Email input\n     * @param emailElem\n     */\n\tstatic checkMail(emailElem) {\n\n\t\tconst email = emailElem.getData();\n\t\tconst pattern = /([\\w-]+)@([\\w-]+)(\\.[\\w]+)/;\n\t\tif (pattern.test(email) === false) {\n\t\t\temailElem.setError('incorrect email');\n\t\t} else {\n\t\t\temailElem.setError(null);\n\t\t}\n\t}\n\n\t/**\n     * Validation of Name input\n     * @param nameElem\n     */\n\tstatic checkName(nameElem) {\n\t\tconst name = nameElem.getData();\n\t\tconst pattern = /^[a-zA-Z0-9_-]{3,16}$/;\n\t\tif (pattern.test(name)) {\n\t\t\tnameElem.setError(null);\n\t\t} else {\n\t\t\tnameElem.setError('incorrect name');\n\t\t}\n\t}\n\n\t/**\n     * Validation of Password input\n     * @param passElem\n     */\n\tstatic checkPass(passElem) {\n\t\tconst pass = passElem.getData();\n\t\tif (pass.length < 8) {\n\t\t\tpassElem.setError('too short password');\n\t\t} else {\n\t\t\tpassElem.setError(null);\n\t\t}\n\t}\n\n\t/**\n     * Validation of PasswordConfirm input\n     * @param passElem\n     * @param confElem\n     */\n\tstatic checkConfirm(passElem, confElem) {\n\t\tif (passElem.getData() !== confElem.getData()) {\n\t\t\tconfElem.setError('passwords do not match');\n\t\t} else {\n\t\t\tconfElem.setError(null);\n\t\t}\n\t}\n}","export default class Block {\n/**\n* should be overriden\n*/\n\trender() {}\n}","\nconst serverUrl = 'https://rha-backend.herokuapp.com/';\n//const serverUrl = 'http://localhost:5000/';\n\n/**\n * Contains methods' paths of user API\n * @type {{login: string, signup: string, logout: string, user: string, updateUser: string, leaderBoard: string}}\n */\nconst userAPIMethods = {\n\tlogin: 'users/auth',\n\tsignup: 'users/create',\n\tlogout: 'users/logout',\n\tuser: 'users/info',\n\tupdateUser: 'users/chpwd',\n\tleaderBoard: 'users/rating',\n\tupdateAvatar: 'users/chava'\n};\n\n// export const route = {\n//     debug: true\n// };\n\nexport default {serverUrl, userAPIMethods};","/* eslint-disable indent */\nimport Player from './player.js';\nimport bus from '../../bus.js';\nimport getRandom from '../math/getRandom.js';\n\n/**\n * Class representing game Player\n */\nexport default class BotPlayer extends Player {\n\t/**\n\t * Creates Player\n\t * @param name\n\t * @param color\n\t */\n\tconstructor(name, color) {\n\t\tsuper(name, color);\n\n\t\tthis.listeners();\n\t}\n\n\t/**\n\t * Sets up player's listeners\n\t */\n\tlisteners() {\n\t\tbus.on('bot-move', dict => {\n\t\t\tconst nextPLayer = dict.payload;\n\t\t\tif (nextPLayer.name !== this.name) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// debugger;\n\t\t\tconst attackers = [];\n\t\t\tfor (let i = 0; i < this.regions.length; i++) {\n\n\t\t\t\tif (this.regions[i].neighbour.length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tattackers.push(this.regions[i]);\n\t\t\t}\n\t\t\tconst attacker = getRandom(0, attackers.length - 1);\n\t\t\t// debugger;\n\t\t\tbus.emit('bot-attack', {\n\t\t\t\tfrom: attackers[attacker],\n\t\t\t\tto: attackers[attacker].neighbour[getRandom(0, attackers[attacker].neighbour.length - 1)]\n\t\t\t});\n\t\t\tbus.emit('bot-change-move', 'bot');\n\t\t});\n\t}\n}","import bus from '../../bus.js';\n\nexport  const renderScene = (canvas, regions, img) => {\n\tconst ctx = canvas.getContext('2d');\n\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\tctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\tregions.forEach((region, i) => {\n\t\tregion.renderHex();\n\t});\n}","import PLAYER_STATES from '../config/playerStates.js';\nimport {renderScene} from '../helperFuncs/renderScene.js';\n/**\n * Class representing generic game Player\n */\nexport default class Player {\n\t/**\n\t * Creates player\n\t * @param name\n\t * @param color\n\t */\n\tconstructor(name, color, canvas, img) {\n\t\tthis.score = 0;\n\t\tthis.resources = 0;\n\t\tthis.regions = [];\n\t\tthis.status = PLAYER_STATES.DISABLED;\n\t\tthis.color = color;\n\t\tthis.name = name;\n\t\tthis.canvas = canvas;\n\t\tthis.img = img;\n\t}\n\n\t/**\n\t * should be overriden\n\t */\n\tinit() {\n\n\t}\n\n\t/**\n\t * Принадлежит ли данный регион игроку\n\t * @param region\n\t * @return {boolean}\n\t */\n\tisTheRegionOfPlayer(region) {\n\t\tfor (let i = 0; i < this.regions.length; ++i) {\n\t\t\tif (this.regions[i].name === region.name) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Gives the player new region\n\t * @param newRegion\n\t */\n\taddRegion(newRegion) {\n\t\tnewRegion.area.setColor(this.color);\n\t\trenderScene(this.canvas, this.regions, this.img)\n\t\t// newRegion.area.reColor(this.color);\n\t\tnewRegion.owner = this;\n\t\tthis.regions.push(newRegion);\n\t}\n\n\t/**\n\t * deletes region\n\t * @param reg\n\t */\n\tdelRegion(reg) {\n\t\tfor (let i = 0; i < this.regions.length; ++i) {\n\t\t\tif (this.regions[i] === reg) {\n\t\t\t\tthis.regions.splice(i,1);\n\t\t\t}\n\t\t}\n\t\tif (this.regions.length === 0) {\n\t\t\tthis.status = PLAYER_STATES.LOSE;\n\t\t}\n\t}\n\n\t/**\n\t * sets player's status\n\t * @param status\n\t */\n\tsetStatus(status) {\n\t\tthis.status = status;\n\t}\n}","import Player from './player.js';\nimport PLAYER_STATES from '../config/playerStates.js';\n\n/**\n * Class representing client's player\n */\nexport default class MainPlayer extends Player {\n\t/**\n\t * Creates main player\n\t * @param name\n\t * @param color\n\t */\n\tconstructor(name, color) {\n\t\tsuper(name, color);\n\t\tthis.status = PLAYER_STATES.DEFAULT;\n\t}\n}","import Block from './block.js';\n/** Class representing button */\nexport default class Button extends Block {\n    /**\n    * Create a button\n    * @param {string} type   - type of the button\n    * @param {string} value  - inner text\n    * @param {string} parent - parent element\n    */\n\tconstructor(type, value, parent) {\n\t\tsuper();\n\t\tthis.buttonWrapper = document.createElement('div');\n\t\tthis.buttonElement = document.createElement('button');\n\t\tthis.buttonElement.classList.add('btn-style');\n\t\tthis.buttonElement.classList.add('button');\n\t\tthis.buttonElement.innerHTML = value;\n\t\tthis.buttonElement.type = type;\n\n\t\tif (parent) {\n\t\t\tparent.appendChild(this.buttonWrapper);\n\t\t}\n\t\tthis.buttonWrapper.classList.add('page-button');\n\n\t\tthis.buttonWrapper.appendChild(this.buttonElement);\n\t}\n\n\t/**\n     * Get the button DOM element\n     * @return {HTMLDivElement | *}\n     */\n\trender() {\n\t\treturn this.buttonWrapper;\n\t}\n\n\t/**\n     * To make a button hidden\n     */\n\thide() {\n\t\tthis.buttonWrapper.classList.add('hidden');\n\t}\n\n\t/**\n     * To make button visible\n     */\n\tshow() {\n\t\tthis.buttonWrapper.classList.remove('hidden');\n\t}\n\n\t/**\n     * Defines behaviour on click\n     * @param {function} callbackfn - button click handler\n     */\n\tsetOnClick(callbackfn) {\n\t\tthis.buttonElement.addEventListener('click',  event => {\n\t\t\tevent.preventDefault();\n\t\t\tcallbackfn();\n\t\t});\n\t}\n}\n","import config from '../conf/route.js';\n\n/**\n * Class represents interface for working with HTTP\n */\nclass HttpService {\n\t/**\n     * GET request\n     * @param url\n     * @param  {function} callbackfn\n     * @return {PromiseLike<T> | Promise<T>}\n     */\n\tstatic get(url, callbackfn) {\n\t\treturn this.request('GET', url)\n\t\t\t.then (\n\t\t\t\tresponse => {\n\t\t\t\t\tif (response.status === 200) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcallbackfn(null, response.json());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (err) {\n\t\t\t\t\t\t\tconsole.error('get error: ', err);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallbackfn(response, null);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\t/**\n     * POST request\n     * @param url\n     * @param body\n     * @param  {function} callbackfn\n     * @return {PromiseLike<T> | Promise<T>}\n     */\n\tstatic post(url, body, callbackfn) {\n\t\treturn this.request('POST', url, body)\n\t\t\t.then (\n\t\t\t\tresponse => {\n\t\t\t\t\tif (response.status < 300) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcallbackfn(null, response.json());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (err) {\n\t\t\t\t\t\t\tconsole.error('post error: ', err);\n\t\t\t\t\t\t\tcallbackfn(err);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallbackfn(response);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\t/**\n     * Generic request\n     * @param requestMethod\n     * @param url\n     * @param body\n     * @return {Promise<Response>}\n     */\n\tstatic request(requestMethod, url, body) {\n\t\tconst headers = new Headers();\n\n\t\tif (requestMethod ==='POST') {\n\t\t\tif (url !== 'users/chava') {\n\t\t\t\theaders.append('Content-Type', 'application/json; charset=utf-8');\n\t\t\t}\n\n\t\t}\n\n\t\tconst req = {\n\t\t\tmethod: requestMethod,\n\t\t\theaders: headers,\n\t\t\tbody: body,\n\t\t\tcredentials: 'include',\n\t\t\tmode: 'cors'\n\t\t};\n\t\t//TODO:: на время\n\t\tif (url === 'users/chava') {\n\t\t\treturn fetch('http://localhost:5000/users/chava', req);\n\t\t}\n\t\treturn fetch(`${config.serverUrl}${url}`, req);\n\t}\n}\n\nexport default HttpService;","\n\n\nconst amountofCoorX = 1000;\nconst amountofCoorY = 610;\n\nexport default class Coordinate {\n\tconstructor(game_canvas) {\n\t\tif (Coordinate.__instance) {\n\t\t\treturn Coordinate.__instance;\n\t\t}\n\t\tCoordinate.__instance = this;\n\t\tthis.game_canvas = game_canvas;\n\t\tthis.xSize = game_canvas.width / amountofCoorX;\n\t\tthis.ySize = game_canvas.height / amountofCoorY;\n\n\n\t\tthis.lengthSide = 90;\n\n\t\tthis.allowedCoord = [\n\t\t\t{\n\t\t\t\tname: 'A',\n\t\t\t\tx: this.xSize * 365,\n\t\t\t\ty: 345 * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['B', 'C', 'D']\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'B',\n\n\t\t\t\tx: (321 + this.lengthSide * 2) * this.xSize,\n\t\t\t\ty: (345 - this.lengthSide * 0.86) * this.ySize,\n\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['A', 'C', 'D', 'E']\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'C',\n\t\t\t\tx: 365 * this.xSize,\n\t\t\t\ty: (345 - this.lengthSide * 0.86 * 2) * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['A', 'B']\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'D',\n\t\t\t\tx: (321 + this.lengthSide * 2) * this.xSize,\n\t\t\t\ty: (345 + this.lengthSide * 0.86) * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['A', 'B', 'E']\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'E',\n\t\t\t\tx: ((321 + this.lengthSide * 2) + 136) * this.xSize,\n\t\t\t\ty: 345 * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['B', 'D']\n\t\t\t}\n\t\t];\n\t}\n\n\treSize(game_canvas) {\n\t\tthis.xSize = game_canvas.width / amountofCoorX;\n\t\tthis.ySize = game_canvas.height / amountofCoorY;\n\n\t\t//TODO сделать по-человечески\n\t\tthis.allowedCoord = [\n\t\t\t{\n\t\t\t\tname: 'A',\n\t\t\t\tx: this.xSize * 365,\n\t\t\t\ty: 345 * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['B', 'C', 'D']\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'B',\n\t\t\t\tx: (321 + this.lengthSide * 2) * this.xSize,\n\t\t\t\ty: (345 - this.lengthSide * 0.86) * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['A', 'C', 'D', 'E']\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'C',\n\t\t\t\tx: 365 * this.xSize,\n\t\t\t\ty: (345 - this.lengthSide * 0.86 * 2) * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['A', 'B']\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'D',\n\t\t\t\tx: (321 + this.lengthSide * 2) * this.xSize,\n\t\t\t\ty: (345 + this.lengthSide * 0.86) * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['A', 'B', 'E']\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'E',\n\t\t\t\tx: ((321 + this.lengthSide * 2) + 136) * this.xSize,\n\t\t\t\ty: 345 * this.ySize,\n\t\t\t\tallowed: true,\n\t\t\t\tneighbour: ['B', 'D']\n\t\t\t}\n\t\t];\n\n\t}\n}","\n\nexport const aboutRegion = (curRegion, domElem) => {\n\tdomElem.innerText = '';\n\tdomElem.innerText += 'name: ';\n\tdomElem.innerText += curRegion.name;\n\tdomElem.innerText += ' \\n';\n\tdomElem.innerText += 'region: ';\n\tdomElem.innerText += curRegion.gameData.units;\n};\n","/* eslint-disable no-undef */\n\n/**\n * Answers if the point is in Hexagon\n * @param x\n * @param y\n * @param xp\n * @param yp\n * @return {boolean}\n */\nconst inHex = (x, y, xp, yp) => {\n\tlet npol = xp.length;\n\tlet j = npol - 1;\n\tlet c = false;\n\tfor (let i = 0; i < npol; i++){\n\t\tif ((((yp[i]<=y) && (y<yp[j])) || ((yp[j]<=y) && (y<yp[i]))) &&\n\t\t\t(x > (xp[j] - xp[i]) * (y - yp[i]) / (yp[j] - yp[i]) + xp[i])) {\n\t\t\tc = !c;\n\t\t}\n\t\tj = i;\n\t}\n\treturn c;\n};\n\nexport default inHex;","/* eslint-disable indent,no-case-declarations */\nimport inHex from './math/inHex.js';\nimport bus from '../bus.js';\nimport PLAYER_STATES from './config/playerStates.js';\nimport {aboutRegion} from './helperFuncs/renderInfoAboutRegion.js';\n\n/**\n * Class representing Game Scene (Set of graphical and logical elements)\n */\nexport default class GameScene {\n\t/**\n\t * Creates scene\n\t * @param canvas\n\t * @param players\n\t * @param regions\n\t * @param switcher\n\t */\n\tconstructor(canvas, players, regions) {\n\t\tthis.canvas  = canvas;\n\t\tthis.game_ctx = canvas.getContext('2d');\n\t\tthis.players = players;\n\t\tthis.regions = regions;\n\t\tthis.about_region = document.getElementById('about-region');\n\t\tthis.setPlayersRegions();\n\t}\n\n\t/**\n\t * Returns current player\n\t * @return {*}\n\t */\n\tcurrentPlayer() {\n\t\tfor (let i = 0; i < this.players.length; ++i) {\n\t\t\t// TODO проверить работает ли это условие\n\t\t\tif (this.players[i].status !== PLAYER_STATES.DISABLED ) {\n\t\t\t\treturn this.players[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns next player\n\t * @return {*}\n\t */\n\tnextPlayer() {\n\t\tconst curP = this.currentPlayer();\n\t\tfor (let i = 0; i < this.players.length; ++i) {\n\t\t\tif (this.players[i] === curP) {\n\t\t\t\ti = (i + 1) % this.players.length;\n\t\t\t\treturn this.players[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns pointed region\n\t * @param x\n\t * @param y\n\t * @return {Region | null}\n\t */\n\tisRegion(x, y) {\n\t\tfor (let i = 0; i < this.regions.length; ++i) {\n\t\t\tif (inHex(x, y, this.regions[i].area.xp, this.regions[i].area.yp)) {\n\t\t\t\treturn this.regions[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t *\n\t * @param active\n\t * @param current\n\t * @return {boolean}\n\t */\n\tisNeighbour(active, current) {\n\t\tfor (let i = 0; i < active.neighbour.length; i++) {\n\t\t\tif (current.label === active.neighbour[i]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t *\n\t * @return {Region}\n\t */\n\tactiveRegion() {\n\t\tfor (let i = 0; i < this.regions.length; ++i) {\n\t\t\tif (this.regions[i].selected === true) {\n\t\t\t\treturn this.regions[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t *\n\t */\n\tdeactivatePlayers() {\n\t\tthis.players.forEach(player => player.active = false);\n\t}\n\n\t/**\n\t * Sets regions for playes\n\t */\n\tsetPlayersRegions() {\n\t\tfor (let i = 0; i < this.players.length; i++ ) {\n\t\t\tthis.players[i].addRegion(this.regions[i]);\n\t\t}\n\t}\n\n\t/**\n\t * @param x\n\t * @param y\n\t * @return {boolean}\n\t */\n\tisElementOfChangeCanvas(x, y) {\n\t\treturn !!inHex(x, y, this.switcher.arrX, this.switcher.arrY);\n\t}\n\n\t/**\n\t * подписываемся на события кликов мышки\n\t */\n\tonListeners() {\n\t\tbus.on('left-click', data => {\n\t\t\tconst curPlayer = this.currentPlayer();\n\t\t\tconst coordinates = data.payload;\n\t\t\tif (curPlayer.status === PLAYER_STATES.DISABLED) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst curRegion = this.isRegion(coordinates.x, coordinates.y);\n\t\t\tif (!curRegion) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconsole.log(curRegion.neighbour);\n\t\t\tswitch (curPlayer.status) {\n\t\t\t\tcase PLAYER_STATES.DEFAULT:\n\t\t\t\t\tif (!curPlayer.isTheRegionOfPlayer(curRegion)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcurPlayer.status = PLAYER_STATES.READY;\n\n\t\t\t\t\t//выводим информацию о регионе\n\t\t\t\t\taboutRegion(curRegion, this.about_region);\n\t\t\t\t\tbus.emit('select-region', curRegion);\n\t\t\t\t\tbreak;\n\t\t\t\tcase PLAYER_STATES.READY:\n\t\t\t\t\tif (!this.currentPlayer().isTheRegionOfPlayer(curRegion)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t//если нажали на выделенный регион\n\t\t\t\t\tif (curRegion === this.activeRegion()) {\n\t\t\t\t\t\tcurPlayer.status = PLAYER_STATES.DEFAULT;\n\t\t\t\t\t}\n\n\t\t\t\t\t//выводим информацию о регионе\n\t\t\t\t\taboutRegion(curRegion, this.about_region);\n\t\t\t\t\tbus.emit('change-selection',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactive: this.activeRegion(),\n\t\t\t\t\t\t\tnew: curRegion\n\t\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tbus.on('contextmenu', data => {\n\n\t\t\tconst curPlayer = this.currentPlayer();\n\t\t\tconst activeRegion = this.activeRegion();\n\t\t\tconst coordinates = data.payload;\n\t\t\tif (curPlayer.status === PLAYER_STATES.DISABLED || curPlayer.status !== PLAYER_STATES.READY) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst curRegion = this.isRegion(coordinates.x, coordinates.y);\n\t\t\tif (!curRegion) {\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\t//если не является регионом игрока\n\t\t\tif (!curPlayer.isTheRegionOfPlayer(curRegion)) {\n\t\t\t\t//если не является соседом, то выходим\n\t\t\t\tif (this.isNeighbour(activeRegion, curRegion) === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tbus.emit('attack', {\n\t\t\t\t\tfrom: this.activeRegion(),\n\t\t\t\t\tto: curRegion\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t//перемещаем юнитов между своими регионами\n\t\t\t\tcurRegion.gameData.units += activeRegion.gameData.units;\n\t\t\t\tactiveRegion.gameData.units = 0;\n\t\t\t\tbus.emit('change-selection',\n\t\t\t\t\t{\n\t\t\t\t\t\tactive: this.activeRegion(),\n\t\t\t\t\t\tnew: curRegion\n\t\t\t\t\t});\n\t\t\t\t//выводим информацию о регионе\n\t\t\t\taboutRegion(curRegion, this.about_region);\n\t\t\t}\n\t\t});\n\n\t\tbus.on('left-click-change', () => {\n\t\t\tconst curPlayer = this.currentPlayer();\n\t\t\tconst nextPlayer = this.nextPlayer();\n\t\t\t\tif (curPlayer.status === PLAYER_STATES.DISABLED) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\tbus.emit('change-move', {\n\t\t\t\tcurrent: curPlayer,\n\t\t\t\tnext: nextPlayer,\n\t\t\t});\n\t\t});\n\n\t\tbus.on('bot-attack', data => {\n\t\t\tconst regs = data.payload;\n\t\t\tfor (let i = 0; i < this.regions.length; ++i) {\n\t\t\t\tif (regs.to === this.regions[i].label) {\n\t\t\t\t\tbus.emit('attack', {\n\t\t\t\t\t\tfrom: regs.from,\n\t\t\t\t\t\tto: this.regions[i]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tbus.on('bot-change-move', () => {\n\t\t\tbus.emit('change-move', {\n\t\t\t\tcurrent: this.currentPlayer(),\n\t\t\t\tnext: this.nextPlayer(),\n\t\t\t});\n\t\t});\n\n\t\tbus.on('delete-from-queue', data => {\n\t\t\tconst player = data.payload;\n\t\t\t// console.log(this.players, '  b ');\n\t\t\tthis.players.forEach((cur, i) => {\n\t\t\t\tif (cur === player) {\n\t\t\t\t\tthis.players.splice(i, 1);\n\t\t\t\t}\n\t\t\t});\n\t\t\t// console.log(this.players, ' a');\n\t\t});\n\n\t}\n}\n\n//todo:: ходит только первый бот\n\n//todo:: бот может сходить в молоко\n\n//todo:: придумать как убирать соседей","\nimport bus from '../bus.js';\n\n/**\n * Class representing set of game controls\n */\nexport default class Controller {\n\t/**\n\t * Creates controllers\n\t * @param game_canvas\n\t * @param change_canvas\n\t */\n\tconstructor(game_canvas, changeBut) {\n\t\tthis.game_canvas = game_canvas;\n\t\tthis.changeBut = changeBut;\n\t\t// this.change_canvas = change_canvas;\n\t\t// this.change_canvas.getContext('2d').transform(1,0,0,1, screen.width*0.7, 0);\n\n\t\tthis.onclick = (event) => {\n\t\t\t// console.log(event.offsetX, ' ', event.offsetY);\n\t\t\t// console.log(event.offsetX * 1000 / this.game_canvas.width);\n\t\t\tbus.emit('left-click', {x: event.offsetX, y: event.offsetY});\n\t\t};\n\n\t\tthis.mousemove = (event) => {\n\t\t\tbus.emit('mousemove', {x: event.offsetX, y: event.offsetY});\n\t\t};\n\t\tthis.contextmenu = (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tbus.emit('contextmenu', {x: event.offsetX, y: event.offsetY});\n\t\t};\n\t\tthis.clickChangeBut = (event) => {\n\t\t\tbus.emit('left-click-change', {});\n\t\t};\n\t\t// this.mousemovecanvas = (event) => {\n\t\t// \tbus.emit('mousemove-change', {x: event.x- screen.width * 0.8, y: event.y});\n\t\t// };\n\t\t// this.conkekstcanvas = (event) => {\n\t\t// \tevent.preventDefault();\n\t\t// \tbus.emit('contextmenu-change', {x: event.x - screen.width * 0.8, y: event.y});\n\t\t// };\n\t}\n\n\t/**\n\t * Turns controls on\n\t */\n\tstart() {\n\t\tthis.game_canvas.addEventListener('click', this.onclick);\n\n\t\tthis.game_canvas.addEventListener('mousemove', this.mousemove);\n\n\t\tthis.game_canvas.addEventListener('contextmenu', this.contextmenu);\n\n\t\tthis.changeBut.addEventListener('click', this.clickChangeBut);\n\t\t//\n\t\t// this.change_canvas.addEventListener('mousemove', this.mousemovecanvas);\n\t\t//\n\t\t// this.change_canvas.addEventListener('contextmenu', this.conkekstcanvas);\n\t}\n\n\t/**\n\t * Turn controls off\n\t */\n\tstop() {\n\t\tthis.game_canvas.removeEventListener('click', this.onclick);\n\n\t\tthis.game_canvas.removeEventListener('mousemove', this.mousemove);\n\n\t\tthis.game_canvas.removeEventListener('contextmenu', this.contextmenu);\n\n\t\tthis.changeBut.removeEventListener('click', this.clickChangeBut);\n\t\t//\n\t\t// this.change_canvas.removeEventListener('mousemove', this.mousemovecanvas);\n\t\t//\n\t\t// this.change_canvas.removeEventListener('contextmenu', this.conkekstcanvas);\n\t}\n}\n\n","\nexport const battleCalc = (firstRegion, secondRegion) => {\n\t//todo КАКИЕ ТО ПРОЦЕНТЫ АААА\n\tconst result = firstRegion.gameData.units - secondRegion.gameData.units * 2;\n\tif (result > 0) {\n\t\tfirstRegion.gameData.units -= secondRegion.gameData.units * 2;\n\t\tsecondRegion.gameData.units = 0;\n\t\treturn true;\n\t} else {\n\t\tsecondRegion.gameData.units -= firstRegion.gameData.units / 2;\n\t\tfirstRegion.gameData.units = 0;\n\t\treturn false;\n\t}\n};","import bus from '../../bus.js';\n\nexport const timer = (htmlElement) => {\n\tlet sec = 30;\n\tlet g = setInterval(() => {\n\t\thtmlElement.innerHTML = --sec;\n\t\tif (sec === 0) {\n\t\t\tclearInterval(g);\n\t\t\tbus.emit('left-click-change', {});\n\t\t}\n\t}, 1000);\n\tbus.on('left-click-change', () => {\n\t\t//sec = 0;\n\t\tclearInterval(g);\n\t});\n};","import bus from '../bus.js';\nimport PLAYER_STATES from './config/playerStates.js';\nimport MainPlayer from './player/mainPlayer.js';\nimport BotPlayer from './player/botPlayer.js';\nimport {timer} from './helperFuncs/timer.js';\nimport {battleCalc} from './helperFuncs/battleCalc.js';\nimport {renderScene} from './helperFuncs/renderScene.js';\n\n\n/**\n * Class representing game logic\n */\nexport default class GameManager {\n\t/**\n\t * Creates logic =)\n\t * @param controller\n\t */\n\tconstructor(controller, canvas, regions, img) {\n\t\tthis.controller = controller;\n\t\tthis.game_canvas = canvas;\n\t\tthis.regions = regions;\n\t\tthis.img = img;\n\t\tthis.timer = document.getElementById('timer');\n\t\ttimer(this.timer);\n\t}\n\n\n\t/**\n\t * Starts game logic 8)\n\t */\n\tstart() {\n\t\tbus.on('select-region', data => {\n\t\t\tconst region = data.payload;\n\t\t\tregion.selected = true;\n\t\t\tregion.area.setStroke('red');\n\t\t\trenderScene(this.game_canvas, this.regions, this.img);\n\t\t\t// region.area.reDraw('red', 2);\n\t\t});\n\n\t\tbus.on('change-selection', data => {\n\t\t\tconst regions = data.payload;\n\t\t\tregions.active.selected = false;\n\t\t\tregions.new.selected = true;\n\t\t\t// regions.new.area.reDraw('red', 2);\n\t\t\tregions.new.area.setStroke('red');\n\t\t\t// regions.active.area.reDraw('black', 2);\n\t\t\tregions.active.area.setStroke('black');\n\n\t\t});\n\n\t\tbus.on('attack', data => {\n\t\t\tconst regions = data.payload;\n\t\t\tconst from = regions.from;\n\t\t\tconst to = regions.to;\n\n\n\t\t\t//true если первый, false если второй\n\t\t\tconst fromWin = battleCalc(from, to);\n\n\t\t\tif (fromWin) {\n\t\t\t\tto.setColor(from.getColor());\n\t\t\t\tto.owner.delRegion(to);\n\n\t\t\t\tif (to.owner.regions.length === 0) {\n\t\t\t\t\tto.owner.setStatus(PLAYER_STATES.DISABLED);\n\t\t\t\t\tbus.emit('delete-from-queue', to.owner);\n\n\t\t\t\t}\n\t\t\t\tbus.emit('update-neighbour', {\n\t\t\t\t\tfrom: from,\n\t\t\t\t\tto: to\n\t\t\t\t});\n\t\t\t\tfrom.owner.addRegion(to);\n\t\t\t}\n\t\t});\n\t\tbus.on('change-move', (dict) => {\n\t\t\tconst data = dict.payload;\n\t\t\t//data.switcher.reDraw('red');\n\t\t\tdata.current.setStatus(PLAYER_STATES.DISABLED);\n\t\t\tdata.next.setStatus(PLAYER_STATES.DEFAULT);\n\t\t\tif (data.next instanceof MainPlayer) {\n\t\t\t\t//вызываем таймер заного для текущего игрока\n\t\t\t\ttimer(this.timer);\n\t\t\t\tthis.controller.start();\n\t\t\t}\n\t\t\telse if (data.next instanceof BotPlayer) {\n\t\t\t\tthis.controller.stop();\n\t\t\t\tbus.emit('bot-move', data.next);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.controller.stop();\n\t\t\t}\n\t\t});\n\t}\n\n\n\t/**\n\t * destroys game logic ;)\n\t */\n\tdestroy() {\n\t\tbus.off('select-region', data => {\n\t\t\tconst region = data.payload;\n\t\t\tregion.selected = true;\n\t\t\tregion.area.reDraw('red', 3);\n\t\t});\n\n\t\tbus.off('change-selection', data => {\n\t\t\tconst regions = data.payload;\n\t\t\tregions.active.selected = false;\n\t\t\tregions.new.selected = true;\n\t\t\tregions.new.area.reDraw('red', 3);\n\t\t\tregions.active.area.reDraw('black', 3);\n\t\t});\n\t}\n}","export const reachMatrix = [\n\t[0, 1, 1, 1, 0],\n\t[1, 0, 1, 1, 1],\n\t[1, 1, 0, 0, 0],\n\t[1, 1, 0, 0, 1],\n\t[0, 1, 0, 1, 0]\n];","/* eslint-disable no-undef */\nimport bus from '../bus.js';\n\n/**\n * Class represents Hexagon graphical element\n */\nexport default class Hexagon {\n\t/**\n\t * Creates Hexagon\n\t * @param canvas\n\t * @param xC\n\t * @param yC\n\t * @param color\n\t */\n\tconstructor(name, canvas, xC, yC, color, coordinate) {\n\t\tthis.name = name;\n\t\tthis.canvas = canvas;\n\t\tthis.game_ctx = this.canvas.getContext('2d');\n\t\tthis.draw(xC, yC, color);\n\t\tthis.xC = xC;\n\t\tthis.yC = yC;\n\t\tthis.color = color;\n\t\tthis.strokeColor = 'black';\n\t\tbus.on('resize-for-draw', () => {\n\t\t\t//todo: далее с соседями\n\t\t\t//todo: сделать кексы прозрачными плюс фон\n\t\t\tfor (let i = 0; i < coordinate.allowedCoord.length; i++) {\n\t\t\t\t//console.log(coordinate.allowedCoord.length, '      length');\n\t\t\t\tif (coordinate.allowedCoord[i].name === this.name) {\n\t\t\t\t\tthis.xC = coordinate.allowedCoord[i].x;\n\t\t\t\t\tthis.yC = coordinate.allowedCoord[i].y;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} \n\t\t\tthis.draw();\n\n\t\t});\n\t}\n\n\t/**\n\t * Draws graphical element\n\t * @param xC\n\t * @param yC\n\t * @param color\n\t */\n\n\tsetColor(color) {\n\t\tthis.color = color;\n\t}\n\tgetColor() {\n\t\treturn this.color;\n\t}\n\tsetStroke(color) {\n\t\tthis.strokeColor = color;\n\t}\n\n\tdraw() {\n\t\t// this.game_ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\t\tconst amountofCoorX = 1000;\n\t\tconst amountofCoorY = 610;\n\t\tthis.R = 90;\n\t\tthis.dR = this.R * 0.866;\n\t\tthis.xp = [\n\t\t\tthis.xC - this.R * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC - this.R / 2 *  this.canvas.width / amountofCoorX,\n\t\t\tthis.xC + this.R / 2 *  this.canvas.width / amountofCoorX,\n\t\t\tthis.xC + this.R * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC + this.R / 2 * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC - this.R / 2 * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC - this.R * this.canvas.width / amountofCoorX\n\t\t];\n\t\tthis.yp = [\n\t\t\tthis.yC,\n\t\t\tthis.yC + this.dR * this.canvas.height / amountofCoorY,\n\t\t\tthis.yC + this.dR * this.canvas.height / amountofCoorY,\n\t\t\tthis.yC,\n\t\t\tthis.yC - this.dR * this.canvas.height / amountofCoorY,\n\t\t\tthis.yC - this.dR *this.canvas.height / amountofCoorY,\n\t\t\tthis.yC\n\t\t];\n\t\tthis.game_ctx.beginPath();\n\t\tthis.game_ctx.lineJoin = 'round';\n\t\tthis.game_ctx.lineWidth = 4;\n\t\tthis.game_ctx.moveTo(this.xp[0], this.yp[0]);\n\t\tfor (let i = 1; i < this.xp.length; ++i) {\n\t\t\tthis.game_ctx.lineTo(this.xp[i], this.yp[i]);\n\t\t}\n\t\tthis.game_ctx.strokeStyle = this.strokeColor;\n\t\tthis.game_ctx.stroke();\n\t\tthis.game_ctx.fillStyle = this.color;\n\t\t// this.game_ctx.fillStyle = 'rgba(100,150,185,0.4)';\n\t\tthis.game_ctx.fill();\n\t\tthis.game_ctx.closePath();\n\t}\n\n\t/**\n\t * Redraws hexagon\n\t * @param color\n\t * @param width\n\t */\n\treDraw(color, width) {\n\t\t// this.game_ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\t\tconst amountofCoorX = 1000;\n\t\tconst amountofCoorY = 610;\n\t\tthis.xp = [\n\t\t\tthis.xC - this.R * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC - this.R / 2 *  this.canvas.width / amountofCoorX,\n\t\t\tthis.xC + this.R / 2 *  this.canvas.width / amountofCoorX,\n\t\t\tthis.xC + this.R * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC + this.R / 2 * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC - this.R / 2 * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC - this.R * this.canvas.width / amountofCoorX\n\t\t];\n\t\tthis.yp = [\n\t\t\tthis.yC,\n\t\t\tthis.yC + this.dR * this.canvas.height / amountofCoorY,\n\t\t\tthis.yC + this.dR * this.canvas.height / amountofCoorY,\n\t\t\tthis.yC,\n\t\t\tthis.yC - this.dR * this.canvas.height / amountofCoorY,\n\t\t\tthis.yC - this.dR *this.canvas.height / amountofCoorY,\n\t\t\tthis.yC\n\t\t];\n\t\tthis.game_ctx.beginPath();\n\t\t// this.game_ctx.lineJoin = 'round';\n\t\tthis.game_ctx.lineWidth = 2;\n\t\tthis.game_ctx.moveTo(this.xp[0], this.yp[0]);\n\t\tfor (let i = 1; i < this.xp.length; ++i) {\n\t\t\tthis.game_ctx.lineTo(this.xp[i], this.yp[i]);\n\t\t}\n\t\tthis.game_ctx.strokeStyle = color;\n\n\t\tthis.strokeColor = color;\n\t\tthis.game_ctx.stroke();\n\t\tthis.game_ctx.closePath();\n\t}\n\n\t/**\n\t * Recolors hexagon\n\t * @param color\n\t */\n\treColor (color) {\n\t\t// this.game_ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\t\tconst amountofCoorX = 1000;\n\t\tconst amountofCoorY = 610;\n\t\tthis.xp = [\n\t\t\tthis.xC - this.R * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC - this.R / 2 *  this.canvas.width / amountofCoorX,\n\t\t\tthis.xC + this.R / 2 *  this.canvas.width / amountofCoorX,\n\t\t\tthis.xC + this.R * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC + this.R / 2 * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC - this.R / 2 * this.canvas.width / amountofCoorX,\n\t\t\tthis.xC - this.R * this.canvas.width / amountofCoorX\n\t\t];\n\t\tthis.yp = [\n\t\t\tthis.yC,\n\t\t\tthis.yC + this.dR * this.canvas.height / amountofCoorY,\n\t\t\tthis.yC + this.dR * this.canvas.height / amountofCoorY,\n\t\t\tthis.yC,\n\t\t\tthis.yC - this.dR * this.canvas.height / amountofCoorY,\n\t\t\tthis.yC - this.dR *this.canvas.height / amountofCoorY,\n\t\t\tthis.yC\n\t\t];\n\t\tthis.game_ctx.beginPath();\n\t\t// this.game_ctx.lineJoin = 'round';\n\t\t// this.game_ctx.lineWidth = 1;\n\t\tthis.game_ctx.moveTo(this.xp[0], this.yp[0]);\n\t\tfor (let i = 1; i < this.xp.length; ++i) {\n\t\t\tthis.game_ctx.lineTo(this.xp[i], this.yp[i]);\n\t\t}\n\t\tthis.game_ctx.strokeStyle = 'black';\n\t\tthis.game_ctx.stroke();\n\t\t// this.game_ctx.fillStyle = 'white';\n\t\tthis.game_ctx.fillStyle = color;\n\t\t// this.game_ctx.fillStyle = 'rgba(100,150,185,0.4)';\n\t\tthis.game_ctx.fill();\n\t\tthis.game_ctx.closePath();\n\t}\n\n}","/* eslint-disable no-undef */\nimport Hexagon from '../../graphics/hexagon.js';\nimport {reachMatrix} from '../config/reach.js';\nimport bus from '../../bus.js';\n/**\n * Class representing game region\n */\nexport default class Region {\n\t/**\n\t * Creates Region\n\t * @param name\n\t * @param owner\n\t * @param canvas\n\t * @param coordinate\n\t */\n\tconstructor(name, owner, canvas, coordinate, units) {\n\t\tthis.name = name;\n\t\tthis.canvas = canvas;\n\t\tthis.game_ctx = this.canvas.getContext('2d');\n\t\tthis.selected = false;\n\t\tthis.allowedCoordinates = coordinate.allowedCoord;\n\t\tthis.coordinate = coordinate;\n\t\tthis.owner = owner;\n\t\tthis.color = owner.color;\n\t\tthis.gameData = {\n\t\t\tunits: units\n\t\t};\n\t\tthis.setBusListeners();\n\t\tthis.area = null;\n\t\tthis.label = null;\n\t\tthis.globalRegions = null;\n\t\tthis.neighbour = null;\n\t\tthis.number = null;\n\t\tthis.init();\n\t}\n\n\trenderHex() {\n\t\tconsole.log('uuuuuuu  uuuu ');\n\t\tthis.area.draw();\n\t}\n\n\tsetColor(color) {\n\t\tthis.area.setColor(color);\n\t}\n\n\tgetColor() {\n\t\treturn this.area.getColor();\n\t}\n\n\tsetGlobalRegions(regions) {\n\t\tthis.globalRegions = regions;\n\t}\n\n\t/**\n\t * Draws Region and sets it up\n\t */\n\tinit() {\n\t\tfor (let i = 0; i < this.allowedCoordinates.length; ++i) {\n\t\t\tif (this.allowedCoordinates[i].allowed) {\n\t\t\t\tthis.area = new Hexagon(\n\t\t\t\t\tthis.allowedCoordinates[i].name,\n\t\t\t\t\tthis.canvas, this.allowedCoordinates[i].x,\n\t\t\t\t\tthis.allowedCoordinates[i].y,\n\t\t\t\t\tthis.color,\n\t\t\t\t\tthis.coordinate\n\t\t\t\t);\n\t\t\t\tthis.number = i;\n\t\t\t\tthis.neighbour = this.allowedCoordinates[i].neighbour;\n\t\t\t\tthis.label = this.allowedCoordinates[i].name;\n\t\t\t\tthis.allowedCoordinates[i].allowed = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tsetNeighbours(num) {\n\t\treachMatrix[num].forEach(temp => {\n\t\t\tif (temp === 1) {\n\t\t\t\tthis.neighbour.push(temp + 1);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetBusListeners() {\n\t\tbus.on('update-neighbour', dict => {\n\t\t\tconst data = dict.payload;\n\t\t\t//debugger;\n\t\t\tif (data.from.name === this.name) {\n\t\t\t\tthis.removeNeighbour(data.to.name);\n\t\t\t} else if(data.to.name === this.name) {\n\n\t\t\t\tdata.from.owner.regions.forEach(temp => {\n\t\t\t\t\tthis.removeNeighbour(temp.name);\n\t\t\t\t});\n\t\t\t\tdata.to.owner.regions.forEach(temp => {\n\n\t\t\t\t\tif (reachMatrix[data.to.number][temp.number] === 1) {\n\t\t\t\t\t\tlet f = false;\n\t\t\t\t\t\tfor (let i = 0; i < data.to.neighbour.length; ++i) {\n\t\t\t\t\t\t\tif (data.to.neighbour[i] === temp.name)  {\n\t\t\t\t\t\t\t\tf = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (f === false) {\n\t\t\t\t\t\t\tdata.to.neighbour.push(temp.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t} else {\n\t\t\t\t// debugger;\n\t\t\t\tthis.globalRegions.forEach(region => {\n\t\t\t\t\tif (region.name === data.to.name) {\n\t\t\t\t\t\tif (reachMatrix[this.number][region.number] === 1) {\n\t\t\t\t\t\t\tlet f = false;\n\t\t\t\t\t\t\tfor (let i = 0; i < this.neighbour.length; ++i) {\n\t\t\t\t\t\t\t\tif (this.neighbour[i] === data.to.name) {\n\t\t\t\t\t\t\t\t\tf = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (f === false) {\n\t\t\t\t\t\t\t\tthis.neighbour.push(data.to.name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tbus.on('change-move', data => {\n\t\t\t//todo какое то будущее, прослушал все((\n\t\t\tthis.gameData.units += 1000;\n\t\t});\n\t}\n\n\tremoveNeighbour(name) {\n\t\tthis.neighbour.forEach((cur, i) => {\n\t\t\tif (cur === name) {\n\t\t\t\tthis.neighbour.splice(i, 1);\n\t\t\t}\n\t\t});\n\t\tconsole.log(this.name, '  ', this.neighbour);\n\t}\n}","/**\n * Returns random number between min and max\n * @param min\n * @param max\n * @return {*}\n */\nconst getRandom = (min, max) => {\n\treturn Math.floor((Math.random() * (max - min))) + min;\n};\nexport default getRandom;","import MainPlayer from './player/mainPlayer.js';\nimport BotPlayer from './player/botPlayer.js';\nimport Region from './components/region.js';\nimport GameManager from './gameManager.js';\nimport Controller from './controller.js';\nimport GameScene from './gameScene.js';\n\n/**\n * Class representing game\n */\nexport default class Game {\n\t/**\n\t * Creates game\n\t * @param mode\n\t * @param game_canvas\n\t * @param change_canvas\n\t */\n\tconstructor(mode, game_canvas, coordinate, changeBut, img) {\n\t\t//let GameConstructor = null;\n\n\t\t//todo:: онлайн и оффлайн режимы\n\t\tthis.mode = mode;\n\t\tthis.game_canvas = game_canvas;\n\t\tthis.coordinate = coordinate;\n\t\tthis.game_ctx = this.game_canvas.getContext('2d');\n\t\tthis.controller = new Controller(this.game_canvas, changeBut);\n\t\tthis.img = img;\n\t\tthis.players = [\n\t\t\tnew MainPlayer('A', 'rgba(0,255,127,0.4)', this.game_canvas, this.img),\n\t\t\tnew BotPlayer('B','rgba(0,0,205,0.4)', this.game_canvas, this.img),\n\t\t\tnew BotPlayer('C', 'rgba(255,69,0,0.4)', this.game_canvas, this.img),\n\t\t\tnew BotPlayer('D', 'rgba(139,125,107,0.4)', this.game_canvas, this.img),\n\t\t\tnew BotPlayer('E', 'rgba(255,165,0,0.4)', this.game_canvas, this.img)\n\t\t];\n\n\t\tthis.regions = [];\n\t\tthis.players.forEach( (player, i, arr) => {\n\t\t\tthis.regions.push(new Region(player.name, player,\n\t\t\t\tthis.game_canvas, this.coordinate, (arr.length - i) * 1000));\n\t\t});\n\n\n\t\tthis.regions.forEach(temp => {\n\t\t\ttemp.setGlobalRegions(this.regions);\n\t\t});\n\n\t\tthis.scene = new GameScene(this.game_canvas, this.players, this.regions);\n\t\tthis.manager = new GameManager(this.controller, this.game_canvas, this.regions, this.img);\n\t}\n\n\t/**\n\t * Starts game\n\t */\n\tstart() {\n\t\tthis.controller.start();\n\t\tthis.scene.onListeners();\n\t\tthis.manager.start();\n\t}\n\n\t/**\n\t * turns game off\n\t */\n\tdestroy() {\n\t\tthis.controller.stop();\n\t\tthis.manager.destroy();\n\t}\n}\n\n//todo ИНТЕРФЕЙС БЛ*ТЬ\n//todo при выделении границы говнятся, потому что не стираются старые\n","/* eslint-disable no-undef */\nimport Section from '../baseView.js';\nimport Game from '../../../modules/game/game.js';\nimport bus from '../../../modules/bus.js';\nimport Coordinate from '../../../modules/game/config/coordinate.js';\nimport Input from '../../blocks/input/input.js';\n\n\n/**\n * Class representing Section of the game\n */\nexport default class GameSection extends Section {\n\t/**\n\t * Creates game section\n\t */\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.parent = document.getElementById('game');\n\t\tthis.wrapper = document.createElement('div');\n\t\tthis.wrapper.classList.add('wrapper');\n\t\tconsole.log(screen.width, ' ', document.documentElement.clientWidth);\n\n\n\t\tthis.wrapper.innerHTML += generateCanvas(\n\t\t\t{\n\t\t\t\t'width': window.innerWidth * 0.7,\n\t\t\t\t'height': window.innerWidth * 0.525 * 0.83,\n\t\t\t\t'id': 'game-canvas'\n\t\t\t}\n\t\t);\n\t\tthis.parent.appendChild(this.wrapper);\n\t\tthis.game_canvas = document.getElementById('game-canvas');\n\t\tthis.ctx = this.game_canvas.getContext('2d');\n\t\tthis.img = new Image();\n\t\tthis.img.src = '/map.png';\n\t\tthis.img.onload = () => {\n\t\t\t//let pattern = this.ctx.createPattern(img, 'repeat');\n\t\t\tthis.ctx.drawImage(this.img, 0,0, this.game_canvas.width, this.game_canvas.height);\n\t\t\tbus.emit('load-img', {});\n\t\t};\n\n\t\tbus.on('load-img', () => {\n\t\t\tthis.coordinate = new Coordinate(this.game_canvas);\n\t\t\tthis.setWindowResizeHandler();\n\t\t});\n\n\t}\n\n\t/**\n\t * @return {HTMLDivElement | *}\n\t */\n\trender() {\n\t\tbus.on('load-img', () => {\n\t\t\tthis.changeBut = this.wrapper.getElementsByClassName('change')[0];\n\t\t\tthis.game = new Game({}, this.game_canvas, this.coordinate, this.changeBut, this.img);\n\t\t\tthis.game.start();\n\t\t});\n\n\t\treturn this.wrapper;\n\t}\n\n\t/**\n\t * @return {boolean}\n\t */\n\tallowed() {\n\t\t// return User.isAuthorized();\n\t\treturn true;\n\t}\n\n\tcomputeCanvasSize() {\n\t\t// const size = (window.innerWidth > window.innerHeight) ? window.innerHeight : window.innerWidth;\n\t\treturn [window.innerWidth * 0.7, window.innerWidth * 0.525 * 0.83];\n\t}\n\n\tsetWindowResizeHandler() {\n\t\twindow.addEventListener('resize', () => {\n\t\t\t[this.game_canvas.width, this.game_canvas.height] = this.computeCanvasSize();\n\t\t\tthis.ctx.drawImage(this.img, 0, 0, this.game_canvas.width, this.game_canvas.height);\n\t\t\tthis.coordinate.reSize(this.game_canvas);\n\t\t\tbus.emit('resize-for-draw', {});\n\t\t});\n\t\treturn this;\n\t}\n}\n\n\n//todo логирование событий игры в правом диве\n//todo инструкция\n//todo синглплеер ~ треня\n//todo графоний\n\n\n//todo НА ЗАВТРА ЕПТ (разобраться с цветами хексов, начать реализовывать\n// интерфейс по красоте, установить другой фон\n// реализовать логику выбора юнитов(их кол-во для атаки)\n// анимации\n","import Section from '../baseView.js';\nimport bus from '../../../modules/bus.js';\nimport Router from '../../../modules/router.js';\nimport User from '../../../modules/userModel.js';\n\n\n/**\n * Class represents Section with Menu buttons\n */\nexport default class MenuSection extends Section {\n\t/**\n     * Creates generic section\n     */\n\tconstructor(){\n\t\tsuper();\n\t\tthis.sign();\n\t}\n\n\t/**\n     * Renders and returns MenuSection DOM element\n     * @return {HTMLDivElement | *}\n     */\n\trender() {\n\t\tthis.menu = document.createElement('div');\n\t\tthis.attrsActive = [\n\t\t\t{\n\t\t\t\ttitle: 'singleplayer',\n\t\t\t\thref: '/singleplayer'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'multiplayer',\n\t\t\t\thref: '#'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'profile',\n\t\t\t\thref: '/profile'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'rating',\n\t\t\t\thref: '/rating'\n\t\t\t},\n\t\t];\n\t\tthis.attrPassive = [\n\t\t\t{\n\t\t\t\ttitle: 'singleplayer',\n\t\t\t\thref: '/singleplayer'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Sign In',\n\t\t\t\thref: '/login'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Sign Up',\n\t\t\t\thref: '/register'\n\t\t\t},\n\t\t];\n\n\t\tif (User.isAuthorized()) {\n\t\t\tthis.menu.innerHTML = generateMenu({'attrs': this.attrsActive});\n\t\t\tthis.logout = document.createElement('a');\n\t\t\tthis.logout.setAttribute('href', '/');\n\t\t\tthis.logout.innerText = 'logout';\n\t\t\tthis.logout.addEventListener('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tbus.emit('logout', null);\n\t\t\t});\n\t\t\tthis.logoutWrapper = document.createElement('div');\n\t\t\tthis.logoutWrapper.classList.add('button');\n\t\t\tthis.logoutWrapper.appendChild(this.logout);\n\t\t\tthis.menu.appendChild(this.logoutWrapper);\n\t\t}\n\t\telse {\n\t\t\tthis.menu.innerHTML = generateMenu({'attrs': this.attrPassive});\n\t\t}\n\t\treturn this.menu;\n\t}\n\n\tallowed() {\n\t\treturn true;\n\t}\n\n\tsign() {\n\t\tbus.on('user:authorized', (() => {\n\t\t\tthis.allow = true;\n\t\t\tnew Router().open('/menu');\n\t\t}));\n\n\t\tbus.on('user:unauthorized', (() => {\n\t\t\tthis.allow = false;\n\t\t}));\n\n\t\tbus.on('menu:hide', (() => {\n\t\t\tthis.hide();\n\t\t}));\n\t}\n\n\thide() {\n\t\tthis.menu.setAttribute('hidden', 'hidden');\n\t}\n}\n","import Form from './form.js';\nimport Input from '../blocks/input/input.js';\nimport Validator from '../../modules/validator.js';\n\n\n/**\n * Class representing Login Form\n */\nexport default class LoginForm extends Form {\n\t/**\n     * Creates generic form\n     */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n     * Return input data of the form\n     * @return {{name: null, email: string, password: string}}\n     */\n\tgetData() {\n\t\tconst email = this.Email.getData();\n\t\tconst password = this.Password.getData();\n\t\tif (email === '' || password === '') {\n\t\t\treturn null;\n\t\t}\n\t\treturn {\n\t\t\temail: email,\n\t\t\tpassword: password\n\t\t};\n\t}\n\n\t/**\n     * Renders and returns form DOM element\n     * @return {*}\n     */\n\trender() {\n\t\tthis.Email = new Input({\n\t\t\ttype: 'text',\n\t\t\tplaceholder: 'email',\n\t\t\tid: 'loginEmail'\n\t\t});\n\n\t\tthis.Password = new Input({\n\t\t\ttype: 'password',\n\t\t\tplaceholder: 'password',\n\t\t\tid: 'loginPassword'\n\t\t});\n\n\t\tthis.InputSubmit = new Input({\n\t\t\ttype: 'submit',\n\t\t\tvalue: 'Sign In',\n\t\t\tid: 'loginSubmit'\n\t\t});\n\n\t\tthis.Email.setOnInputChange(() => {\n\t\t\tValidator.checkMail(this.Email);\n\t\t});\n\n\t\tthis.Password.setOnInputChange(() => {\n\t\t\tValidator.checkPass(this.Password);\n\t\t});\n\n\n\t\tthis.formElement.appendChild(this.Email.render());\n\t\tthis.formElement.appendChild(this.Password.render());\n\t\tthis.formElement.appendChild(this.InputSubmit.render());\n\n\t\treturn this.formElement;\n\t}\n\n\t/**\n     * Defines behaviour on submit\n     * @param {function} callbackfn – submit handler\n     */\n\tsetOnSubmit(callbackfn) {\n\t\tthis.formElement.addEventListener('submit', (ev) => {\n\t\t\tev.preventDefault();\n\t\t\tcallbackfn();\n\t\t});\n\t}\n\n}\n","/* eslint-disable no-undef */\nimport Section from '../baseView.js';\nimport LoginForm from '../../forms/loginForm.js';\nimport bus from '../../../modules/bus.js';\nimport User from '../../../modules/userModel.js';\n\n/** Class represents section with Login Form */\nexport default class LoginSection extends Section {\n\t/**\n     * Creates generic section\n     */\n\tconstructor() {\n\t\tsuper();\n\t\tthis.sign();\n\t}\n\n\t/**\n     * Renders and returns LoginSection DOM element\n     * @return {HTMLDivElement | *}\n     */\n\trender() {\n\n\t\tthis.login = document.createElement('div');\n\t\tthis.login.innerHTML = generateLogin();\n\t\tthis.after = this.login.getElementsByClassName('button')[0];\n\n\t\tthis.loginForm = new LoginForm();\n\n\t\tthis.login.firstChild.insertBefore(this.loginForm.render(), this.after);\n\n\n\t\tthis.loginForm.setOnSubmit(() => {\n\t\t\tconst userData = this.loginForm.getData();\n\t\t\tif (userData === null) {\n\t\t\t\tthis.loginForm.Email.setError('empty fields');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst jsonUserData = JSON.stringify(userData);\n\t\t\tconsole.log(jsonUserData);\n\t\t\tbus.emit('user:login', jsonUserData);\n\t\t});\n\t\treturn this.login;\n\t}\n\n\tallowed() {\n\t\treturn !User.isAuthorized();\n\t}\n\n\tsign() {\n\t\tbus.on('login-error', (error) => {\n\t\t\tthis.loginForm.Email.setError(error.payload);\n\t\t});\n\t}\n}\n","import Form from './form.js';\nimport Input from '../blocks/input/input.js';\nimport Validator from '../../modules/validator.js';\n// validator\n// и какие-то глобальные переменные\n/**\n * Class representing registration form\n */\nexport default class RegisterForm extends Form {\n\t/**\n\t * creates RegisterForm\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * @return {HTMLDivElement}\n\t */\n\trender() {\n\t\tthis.Email = new Input({\n\t\t\ttype: 'text',\n\t\t\tplaceholder: 'email',\n\t\t\tid: 'registerEmail'\n\t\t});\n\n\t\tthis.Name = new Input({\n\t\t\ttype: 'text',\n\t\t\tplaceholder: 'name',\n\t\t\tid: 'registerName'\n\t\t});\n\n\t\tthis.Password = new Input({\n\t\t\ttype: 'password',\n\t\t\tplaceholder: 'password',\n\t\t\tid: 'registerPass'\n\t\t});\n\n\t\tthis.ConfirmPassword = new Input({\n\t\t\ttype: 'password',\n\t\t\tplaceholder: 'confirm password',\n\t\t\tid: 'registerPass2'\n\t\t});\n\n\t\tthis.InputSubmit = new Input({\n\t\t\ttype: 'submit',\n\t\t\tvalue: 'Sign Up',\n\t\t\tid: 'registerSubmit'\n\t\t});\n\n\n\t\tthis.Email.setOnInputChange(() => {\n\t\t\tValidator.checkMail(this.Email);\n\t\t});\n\t\tthis.Name.setOnInputChange(() => {\n\t\t\tValidator.checkName(this.Name);\n\t\t});\n\t\tthis.Password.setOnInputChange(() => {\n\t\t\tValidator.checkPass(this.Password);\n\t\t});\n\t\tthis.ConfirmPassword.setOnInputChange(() => {\n\t\t\tValidator.checkConfirm(this.Password, this.ConfirmPassword);\n\t\t});\n\n\t\tthis.formElement.appendChild(this.Email.render());\n\t\tthis.formElement.appendChild(this.Name.render());\n\t\tthis.formElement.appendChild(this.Password.render());\n\t\tthis.formElement.appendChild(this.ConfirmPassword.render());\n\t\tthis.formElement.appendChild(this.InputSubmit.render());\n\n\t\treturn this.formElement;\n\t}\n\n\tgetData() {\n\t\tconst name = this.Name.getData();\n\t\tconst email = this.Email.getData();\n\t\tconst password = this.Password.getData();\n\t\tif (name === '' || email === '' || password === '') {\n\t\t\treturn null;\n\t\t}\n\t\treturn {\n\t\t\tusername: name,\n\t\t\temail: email,\n\t\t\tpassword: password\n\t\t};\n\t}\n\n\n\n\tsetOnSubmit(callbackfn) {\n\t\tthis.formElement.addEventListener('submit', (ev) => {\n\t\t\tev.preventDefault();\n\t\t\tcallbackfn();\n\t\t});\n\t}\n}\n","/* eslint-disable no-undef */\nimport Section from '../baseView.js';\nimport RegisterForm from '../../forms/registerForm.js';\n\nimport bus from '../../../modules/bus.js';\nimport User from '../../../modules/userModel.js';\n\n\n\n/**\n * Class represents Section with Registration Form\n */\nexport default class RegisterSection extends Section {\n\t/**\n     * Creates generic Section and wraps into Parent element\n     * @param parent\n     */\n\tconstructor() {\n\t\tsuper();\n\t\tUser.isAuthorized();\n\t\tthis.sign();\n\t}\n\n\t/**\n     * Renders and returns RegisterSection DOM element\n     * @return {HTMLDivElement}\n     */\n\trender() {\n\t\tthis.register = document.createElement('div');\n\t\tthis.register.innerHTML = generateRegister();\n\t\tthis.registerForm = new RegisterForm();\n\t\tthis.after = this.register.getElementsByClassName('button')[0];\n\t\tthis.register.firstChild.insertBefore(this.registerForm.render(), this.after);\n\t\tthis.registerForm.setOnSubmit( () => {\n\n\t\t\tconst userData = this.registerForm.getData();\n\t\t\tconsole.log(userData);\n\t\t\tif (userData === null) {\n\t\t\t\tthis.registerForm.Email.setError('Empty fields');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst jsonUserData = JSON.stringify(userData);\n\t\t\tbus.emit('user:signup', jsonUserData);\n\t\t\tbus.on('signup-error', (error) => {\n\t\t\t\tthis.registerForm.Email.setError(error.payload);\n\t\t\t});\n\n\t\t});\n\t\treturn this.register;\n\t}\n\n\tallowed() {\n\t\treturn !User.isAuthorized();\n\t}\n\n\tsign() {\n\n\t\tbus.on('signup-error', (error) => {\n\t\t\tthis.registerForm.Email.setError(error.payload);\n\t\t});\n\n\t}\n}\n","import http from './http.js';\nimport route from '../conf/route.js';\nimport bus from './bus.js';\nimport Router from './router.js';\nimport User from './userModel.js';\n// error transformer\n\n/**\n * Class represents set of tools to work with User data\n */\nclass UserController {\n\t/**\n     * Creates user and loads user data\n     */\n\tconstructor() {\n\t\tif (UserController.__instance) {\n\t\t\treturn UserController.__instance;\n\t\t}\n\t\tbus.on('user:signup', (data) => {\n\t\t\tconst user = data.payload;\n\t\t\tUser.signUp(user)\n\t\t\t\t.then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tnew Router().open('/');\n\t\t\t\t\t})\n\t\t\t\t.catch(\n\t\t\t\t\terror => {\n\t\t\t\t\t\tbus.emit('signup-error', error);\n\t\t\t\t\t});\n\n\t\t});\n\t\tbus.on('logout', () => {\n\t\t\tUser.logout()\n\t\t\t\t.then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tnew Router().open('/');\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.catch(\n\t\t\t\t\terror => {\n\t\t\t\t\t\tbus.emit('logout-error', error);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\n\t\tbus.on('user:login', (data) => {\n\t\t\tconst user = data.payload;\n\t\t\tUser.signIn(user)\n\t\t\t\t.then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tnew Router().open('/');\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.catch(\n\t\t\t\t\terror => {\n\t\t\t\t\t\tbus.emit('login-error', error);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t\tbus.on('user:update', (data) => {\n\t\t\tconst user = data.payload;\n\t\t\tUser.update(user)\n\t\t\t\t.then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tnew Router().open('/');\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.catch(\n\t\t\t\t\terror => {\n\t\t\t\t\t\tbus.emit('update-error', error);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t\tbus.on('user:avatarUpload', (data) => {\n\t\t\tconst avatar = data.payload;\n\t\t\tconsole.log(avatar);\n\t\t\tUser.uploadAvatar(avatar)\n\t\t\t\t.then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tnew Router().open('/profile');\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t.catch(\n\t\t\t\t\terror => {\n\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t});\n\n\n\t\tUserController.__instance = this;\n\t}\n\n\n\t/**\n     * Loads Rating of all Users\n     * @param page\n     * @param {function} callbackfn\n     * @return {PromiseLike<T>|Promise<T>}\n     */\n\trating(page, callbackfn) {\n\t\treturn http.get(route.userAPIMethods.leaderBoard + '/' + page.toString(), callbackfn);\n\t}\n\n}\nconst userController = new UserController();\nexport default userController;","'use strict';\nimport Section from '../baseView.js';\nimport UserController from '../../../modules/userController.js';\nimport Button from '../../blocks/button.js';\nimport bus from '../../../modules/bus.js';\nimport Router from '../../../modules/router.js';\nimport User from '../../../modules/userModel.js';\n\n\n/**\n * Class represents Section with Rating Table\n */\nexport default class RatingSection extends Section {\n\t/**\n     * Creates generic Section\n     */\n\tconstructor() {\n\t\tsuper();\n\t\tthis.page = 1;\n\t\tthis.sign();\n\t}\n\n\t/**\n     * Renders and returns RaringSection DOM element\n     * @return {HTMLDivElement | *}\n     */\n\trender() {\n\t\tthis.rating = document.createElement('div');\n\t\tthis.rating.innerHTML = '';\n\n\t\tthis.paginationWrap = document.createElement('div');\n\t\tthis.paginationWrap.classList.add('pagination');\n\n\t\tthis.prevButt = document.createElement('a');\n\t\tthis.prevButt.innerText = '<';\n\t\tthis.prevButt.addEventListener('click', event => {\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.rating.removeChild(this.rating.firstChild);\n\t\t\tthis.page--;\n\t\t\tthis.prevButt.hidden = this.page === 1;\n\t\t\tthis.nextButt.hidden = false;\n\t\t\tthis.load(this.page);\n\t\t});\n\t\tthis.nextButt = document.createElement('a');\n\n\n\t\tthis.nextButt.innerText = '>';\n\t\tthis.nextButt.addEventListener('click', event => {\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.rating.removeChild(this.rating.firstChild);\n\t\t\tthis.page++;\n\t\t\tif (this.page !== 1) {\n\t\t\t\tthis.prevButt.hidden = false;\n\t\t\t}\n\t\t\tthis.load(this.page, (empty) => {\n\t\t\t\tif (empty) {\n\t\t\t\t\tthis.nextButt.hidden = true;\n\t\t\t\t\tthis.lastPage = document.createElement('div');\n\t\t\t\t\tthis.lastPage.innerText = 'This is the last page';\n\t\t\t\t\tthis.rating.insertBefore(this.lastPage, this.rating.firstChild);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tthis.prevButt.hidden = this.page === 1;\n\n\t\tthis.paginationWrap.appendChild(this.prevButt);\n\t\tthis.paginationWrap.appendChild(this.nextButt);\n\n\t\tthis.backButtWrap = document.createElement('div');\n\t\tthis.backButtWrap.classList.add('button');\n\t\tthis.backButtWrap.classList.add('back-button');\n\n\t\tthis.backButt = document.createElement('a');\n\t\tthis.backButt.setAttribute('href', '/');\n\t\tthis.backButt.innerText = 'Back to menu';\n\t\tthis.backButtWrap.appendChild(this.backButt);\n\n\t\tthis.load(1, ()=>{});\n\t\tthis.rating.appendChild(this.paginationWrap);\n\t\tthis.rating.appendChild(this.backButtWrap);\n\t\treturn this.rating;\n\t}\n\n\tload(page, callbackfn) {\n\t\tconsole.log(page);\n\n\t\tUserController.rating( page, (err, users) => {\n\t\t\tif (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t\tcallbackfn(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconsole.log(err, users);\n\n\t\t\tusers.then(\n\t\t\t\tdata => {\n\t\t\t\t\tthis.table = document.createElement('div');\n\t\t\t\t\tthis.table.innerHTML = generateRating({'data': data[0], 'user': data[1][0],\n\t\t\t\t\t'pages': data[2][0], 'page': page});\n\t\t\t\t\tthis.rating.insertBefore(this.table, this.rating.firstChild);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\tsign() {\n\t\tbus.on('user:authorized', ((data) => {\n\t\t\tthis.allowed = true;\n\t\t}));\n\n\t\tbus.on('user:unauthorized', ((data) => {\n\t\t\tthis.allowed = false;\n\t\t}));\n\t}\n\n\tallowed() {\n\t\treturn User.isAuthorized();\n\t}\n}","import Form from '../form.js';\nimport Input from '../../blocks/input/input.js';\n\n/**\n * Class representing Load form\n */\nexport default class LoadForm extends Form {\n\t/**\n\t * creates loadForm\n\t * @param type\n\t */\n\tconstructor(type) {\n\t\tsuper();\n\t}\n\n\t/**\n\t * returns data of loadForm\n\t * @return {*}\n\t */\n\tgetData() {\n\t\tconst avatar = this.UploadInput.getFormData();\n\t\tif (avatar === '') {\n\t\t\treturn null;\n\t\t}\n\t\treturn {\n\t\t\tavatar: avatar\n\t\t};\n\t}\n\n\t/**\n\t * @return {HTMLDivElement}\n\t */\n\trender() {\n\t\tthis.UploadInput = new Input({\n\t\t\ttype: 'file',\n\t\t\tplaceholder: '',\n\t\t\tid: 'loadImageInput'\n\t\t});\n\t\tthis.UploadSubmit = new Input({\n\t\t\ttype: 'submit',\n\t\t\tvalue: 'Save picture',\n\t\t\tid: 'loadImageSubmit'\n\t\t});\n\n\t\tthis.formElement.appendChild(this.UploadInput.render());\n\t\tthis.formElement.appendChild(this.UploadSubmit.render());\n\n\t\tthis.formElement.setAttribute('enctype', 'multipart/form-data');\n\t\tthis.formElement.setAttribute('name', 'form_loadFile');\n\t\tthis.formElement.classList.add('form-loadFile');\n\n\t\treturn this.formElement;\n\t}\n\n\tsetOnSubmit(callbackfn) {\n\t\tthis.formElement.addEventListener('submit', (ev) => {\n\t\t\tev.preventDefault();\n\t\t\tcallbackfn();\n\t\t});\n\t}\n}","/**\n * Removes children of the root element and puts new child into it\n * @param {HTMLDivElement} child\n * @param {HTMLDivElement} root\n */\nexport default function renderDOM(child, root) {\n\twhile (root.firstChild) {\n\t\troot.removeChild(root.firstChild);\n\t}\n\troot.appendChild(child);\n}","import renderDOM from '../components/render/render.js';\n\n/**\n * Class represents set of tools for switching sections\n */\nclass SectionSwitcher {\n\tconstructor() {}\n\n\t/**\n     * Switches sections\n     * @param newSection\n     * @param rootForElement\n     */\n\tchangeSection(newSection, rootForElement) {\n\t\trenderDOM(newSection, rootForElement);\n\t}\n}\n\nconst sectionSwitcher = new SectionSwitcher();\n\nexport {sectionSwitcher};\n\nexport default SectionSwitcher;\n\n\n","import Form from './form.js';\nimport Input from '../blocks/input/input.js';\nimport Validator from '../../modules/validator.js';\n\n/**\n * Class representing form to change user data\n */\nexport default class ChangeForm extends Form {\n\t/**\n\t * creates ChangeForm\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * returns data of the form\n\t * @return {{oldp: string, newp: string}}\n\t */\n\tgetData() {\n\t\treturn {\n\t\t\toldp: this.OldPassword.getData(),\n\t\t\tnewp: this.Password.getData()\n\t\t};\n\t}\n\n\t/**\n\t * @return {HTMLDivElement}\n\t */\n\trender() {\n\n\t\tthis.OldPassword = new Input({\n\t\t\ttype: 'password',\n\t\t\tplaceholder: 'old password',\n\t\t\tid: 'changeOld'\n\t\t});\n\n\t\tthis.Password = new Input({\n\t\t\ttype: 'password',\n\t\t\tplaceholder: 'new password',\n\t\t\tid: 'changeNew'\n\t\t});\n\n\t\tthis.RepeatPassword = new Input({\n\t\t\ttype: 'password',\n\t\t\tplaceholder: 'repeat password',\n\t\t\tid: 'changeRepeat'\n\t\t});\n\n\t\tthis.InputSubmit = new Input({\n\t\t\ttype: 'submit',\n\t\t\tvalue: 'Save',\n\t\t\tid: 'changeSubmit'\n\t\t});\n\n\t\t//TODO:: бэк\n\t\tthis.OldPassword.setOnInputChange(() => {\n\t\t\tValidator.checkPass(this.OldPassword);\n\t\t});\n\t\tthis.Password.setOnInputChange(() => {\n\t\t\tValidator.checkPass(this.Password);\n\t\t});\n\t\tthis.RepeatPassword.setOnInputChange(() => {\n\t\t\tValidator.checkConfirm(this.Password, this.RepeatPassword);\n\t\t});\n\n\t\tthis.formElement.appendChild(this.OldPassword.render());\n\t\tthis.formElement.appendChild(this.Password.render());\n\t\tthis.formElement.appendChild(this.RepeatPassword.render());\n\t\tthis.formElement.appendChild(this.InputSubmit.render());\n\n\n\t\treturn this.formElement;\n\t}\n\n\t/**\n\t * Sets submit listener\n\t * @param callbackfn\n\t */\n\tsetOnSubmit(callbackfn) {\n\t\tthis.formElement.addEventListener('submit', (ev) => {\n\t\t\tev.preventDefault();\n\t\t\tcallbackfn();\n\t\t});\n\t}\n}","import Section from '../baseView.js';\nimport ChangeForm from '../../forms/changeForm.js';\nimport Button from '../../blocks/button.js';\nimport bus from '../../../modules/bus.js';\nimport User from '../../../modules/userModel.js';\nimport Router from '../../../modules/router.js';\nimport LoadForm from '../../forms/loadPictureForm/loadPictureForm.js';\n\n/**\n * Class represents Section with Profile data and Form\n */\nexport default class ProfileSection extends Section {\n\t/**\n     * Creates generic Section\n     */\n\tconstructor() {\n\t\tsuper();\n\t\tthis.sign();\n\t}\n\n\t/**\n     * Renders and returns ProfileSection DOM element\n     * @return {HTMLDivElement | *}\n     */\n\trender() {\n\t\tthis.profileElement = document.createElement('div');\n\t\tthis.profileElement.classList.add('div__profile-wrapper');\n\n\t\tthis.attrs = User.getCurUser();\n\t\tthis.profileTable = document.createElement('div');\n\t\tthis.profileTable.innerHTML = generateProfile({'user': this.attrs});\n\t\tthis.profileElement.appendChild(this.profileTable);\n\t\tthis.profileElement.appendChild(document.createElement('hr'));\n\n\t\tthis.fileForm = new LoadForm();\n\t\tthis.profileElement.appendChild(this.fileForm.render());\n\n\t\tthis.changeForm = new ChangeForm();\n\t\tthis.profileElement.appendChild(this.changeForm.render());\n\n\t\tthis.backButt = new Button('button', 'Back', this.profileElement);\n\t\tthis.backButt.setOnClick(() => {\n\t\t\tnew Router().open('/');\n\t\t});\n\n\t\tthis.changeForm.setOnSubmit( () => {\n\t\t\tconst userData = this.changeForm.getData();\n\t\t\tconst jsonUserData = JSON.stringify(userData);\n\t\t\tbus.emit('user:update', jsonUserData);\n\t\t});\n\t\tthis.fileForm.setOnSubmit( () => {\n\t\t\t//TODO:\n\t\t\tconst file = document.getElementById('loadImageInput');\n\t\t\tconst formData = new FormData();\n\t\t\tconst upload = file.files[0];\n\n\t\t\tformData.append('image', upload);\n\n\t\t\tbus.emit('user:avatarUpload', formData);\n\t\t});\n\t\treturn this.profileElement;\n\t}\n\n\tallowed() {\n\t\treturn User.isAuthorized();\n\t}\n\n\tsign() {\n\t\tbus.on('update:error', data => {\n\t\t\tthis.changeForm.Email.setError(data.payload);\n\t\t});\n\t}\n}","'use strict';\n\nimport ProfileSection from './components/views/profileView/profileView.js';\nimport RatingSection from './components/views/ratingView/ratingView.js';\nimport RegisterSection from './components/views/registerView/registerView.js';\nimport LoginSection from './components/views/loginView/loginView.js';\nimport MenuSection from './components/views/menuView/menuView.js';\nimport Router from './modules/router.js';\nimport User from './modules/userModel.js';\nimport GameSection from './components/views/gameView/gameView.js';\n\nconst root = document.getElementById('application');\nconst globalRoot = document.getElementById('body');\n\n// if ('serviceWorker' in navigator) {\n// \tnavigator.serviceWorker.register('/sw.js', {scope: '/'})\n// \t\t.catch((err) => {\n// \t\t\tconsole.log('Service worker error: ' + err);\n// \t\t});\n// }\n\nUser.auth()\n\t.then( () => {\n\t\tnew Router(root, globalRoot)\n\t\t\t.add('/', MenuSection)\n\t\t\t.add('/register', RegisterSection)\n\t\t\t.add('/profile', ProfileSection)\n\t\t\t.add('/rating', RatingSection)\n\t\t\t.add('/login', LoginSection)\n\t\t\t.add('/singleplayer', GameSection)\n\t\t\t.start();\n\t})\n\t.catch();\n\n","/**\n * @type {HTMLCollectionOf<Element>}\n */\nvar radar = document.getElementById( 'radar' ),\n\tdiameter = Math.min(document.getElementById( 'radar-wrapper' ).offsetHeight,document.getElementById( 'radar-wrapper' ).offsetWidth)-100,\n\tradius = diameter / 2,\n\tpadding = 14,\n\tctx = Sketch.create({\n\t\tcontainer: radar,\n\t\tfullscreen: false,\n\t\twidth: diameter,\n\t\theight: diameter\n\t}),\n\n\tdToR = function( degrees ){\n\t\treturn degrees * (Math.PI / 180);\n\t},\n\tsweepAngle = 270,\n\tsweepSize = 2,\n\tsweepSpeed = 1.2,\n\trings = 4,\n\thueStart = 120,\n\thueEnd = 170,\n\thueDiff = Math.abs( hueEnd - hueStart ),\n\tsaturation = 50,\n\tlightness = 40,\n\tlineWidth = 2,\n\tgradient = ctx.createLinearGradient( radius, 0, 0, 0 );\n\n\nradar.style.marginLeft = radar.style.marginTop = ( -diameter / 2 ) - padding + 'px';\ngradient.addColorStop( 0, 'hsla( ' + hueStart + ', ' + saturation + '%, ' + lightness + '%, 1 )' );\ngradient.addColorStop( 1, 'hsla( ' + hueEnd + ', ' + saturation + '%, ' + lightness + '%, 0.1 )' );\n\nvar renderRings = function(){\n\tvar i;\n\tfor( i = 0; i < rings; i++ ){\n\t\tctx.beginPath();\n\t\tctx.arc( radius, radius, ( ( radius - ( lineWidth / 2) ) / rings) * ( i + 1 ), 0, TWO_PI, false );\n\t\tctx.strokeStyle = 'hsla(' + ( hueEnd - ( i * ( hueDiff / rings ) ) ) + ', ' + saturation + '%, ' + lightness + '%, 0.1)';\n\t\tctx.lineWidth = lineWidth;\n\t\tctx.stroke();\n\t};\n};\n\nvar renderGrid = function(){\n\tctx.beginPath();\n\tctx.moveTo( radius - lineWidth / 2, lineWidth );\n\tctx.lineTo( radius - lineWidth / 2, diameter - lineWidth );\n\tctx.moveTo( lineWidth, radius - lineWidth / 2 );\n\tctx.lineTo( diameter - lineWidth, radius - lineWidth / 2 );\n\tctx.strokeStyle = 'hsla( ' + ( ( hueStart + hueEnd ) / 2) + ', ' + saturation + '%, ' + lightness + '%, .03 )';\n\tctx.stroke();\n};\n\nvar renderSweep = function(){\n\tctx.save();\n\tctx.translate( radius, radius );\n\tctx.rotate( dToR(sweepAngle) );\n\tctx.beginPath();\n\tctx.moveTo( 0, 0 );\n\tctx.arc( 0, 0, radius, dToR( -sweepSize ), dToR( sweepSize ), false );\n\tctx.closePath();\n\tctx.fillStyle = gradient;\n\tctx.fill();\n\tctx.restore();\n};\n\nvar renderScanLines = function(){\n\tvar i;\n\tvar j;\n\tctx.beginPath();\n\tfor( i = 0; i < diameter; i += 2 ){\n\t\tctx.moveTo( 0, i + .5 );\n\t\tctx.lineTo( diameter, i + .5);\n\t};\n\tctx.lineWidth = 1;\n\tctx.strokeStyle = 'hsla( 0, 0%, 0%, .02 )';\n\tctx.globalCompositeOperation = 'source-over';\n\tctx.stroke();\n};\n\nctx.clear = function(){\n\tctx.globalCompositeOperation = 'destination-out';\n\tctx.fillStyle = 'hsla( 0, 0%, 0%, 0.1 )';\n\tctx.fillRect( 0, 0, diameter, diameter );\n};\n\nctx.update = function(){\n\tsweepAngle += sweepSpeed;\n};\n\nctx.draw = function(){\n\tctx.globalCompositeOperation = 'lighter';\n\trenderRings();\n\trenderGrid();\n\trenderSweep();\n\trenderScanLines();\n};","import '../public/css/reset.css';\nimport '../public/css/main.css';\nimport '../public/js/components/blocks/input/input.css';\nimport '../public/js/components/blocks/button.css';\nimport '../public/js/components/blocks/decorations/lamp.css';\nimport '../public/js/components/blocks/decorations/plank.css';\nimport '../public/js/components/blocks/decorations/screw.css';\nimport '../public/js/components/views/ratingView/rating.css';\nimport '../public/js/components/views/profileView/profile.css';\nimport '../public/js/components/forms/loadPictureForm/loadPictureForm.css';\nimport '../public/js/components/views/menuView/menu.css';\nimport '../public/js/components/views/ViewsBack.css';\nimport '../public/js/components/radar/radar.css';\nimport '../public/js/components/views/gameView/gameView.css';\n\n// import '../public/js/modules/sketch.js';\nimport '../public/js/components/radar/radar.js';\nimport '../public/js/application.js';\n"],"sourceRoot":""}