!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=71)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.__instance)return e.__instance;this.listeners={},e.__instance=this}return r(e,[{key:"on",value:function(e,t){var n=this;return this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t),function(){n.off(e,t)}}},{key:"off",value:function(e,t){Array.isArray(this.listeners[e])&&(this.listeners[e]=this.listeners[e].filter(function(e){return e!==t}))}},{key:"emit",value:function(e,t){Array.isArray(this.listeners[e])&&this.listeners[e].forEach(function(n){n({event:e,payload:t})})}}]),e}();t.default=new i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(n(14)),o=a(n(9));function a(e){return e&&e.__esModule?e:{default:e}}var u=null,s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.email=t.email,this.rating=t.rating}return r(e,null,[{key:"auth",value:function(){return new Promise(function(t,n){i.default.get(o.default.userAPIMethods.user,function(r,i){if(r)return 401===r.status?(u=null,t(null)):n(r);i.then(function(n){u=new e(n.data),t(u)})})})}},{key:"isAuthorized",value:function(){return!!u}},{key:"getCurUser",value:function(){return u}},{key:"signIn",value:function(t){return new Promise(function(n,r){i.default.post(o.default.userAPIMethods.login,t,function(t,i){if(t)return r(t);console.log(i),n(e.auth())})})}},{key:"signUp",value:function(t){return new Promise(function(n,r){i.default.post(o.default.userAPIMethods.signup,t,function(t,i){if(t)return r(t);console.log(i),n(e.auth())})})}},{key:"logout",value:function(){return new Promise(function(t,n){i.default.post(o.default.userAPIMethods.logout,{},function(r,i){if(r)return n(r);console.log(i),t(e.auth())})})}},{key:"update",value:function(t){return new Promise(function(n,r){i.default.post(o.default.userAPIMethods.updateUser,t,function(t,i){if(t)return r(t);console.log(i),n(e.auth())})})}},{key:"uploadAvatar",value:function(e){return new Promise(function(t,n){i.default.post(o.default.userAPIMethods.updateAvatar,e,function(e,t){if(e)return n(e);console.log(t)})})}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=(r=o)&&r.__esModule?r:{default:r};var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a.default.isAuthorized()}return i(e,[{key:"render",value:function(){}},{key:"allowed",value:function(){return!1}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(38);var o=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.__instance)return e.__instance;this.root=t,this.startRoot=document.getElementById("start"),this.gameRoot=document.getElementById("game"),this.map={},this.global=n,this.active=null,e.__instance=this}return r(e,[{key:"add",value:function(e,t){return this.map[e]=new t(this.root),this}},{key:"open",value:function(e){console.log("open");var t=this.map[e],n=void 0;if("/singleplayer"===e?(console.log("if"),n=this.gameRoot,this.startRoot.hidden=!0,n.hidden=!1):(console.log("else"),n=this.root,this.startRoot.hidden=!1,this.gameRoot.hidden=!0),console.log("view ",e,"is allowed: ",t.allowed()),!t.allowed())return window.history.replaceState(null,"","/"),void this.open("/");window.location.pathname!==e&&window.history.pushState(null,"",e),i.sectionSwitcher.changeSection(t.render(),n)}},{key:"start",value:function(){window.addEventListener("popstate",function(){this.open(window.location.pathname)}.bind(this)),this.root.addEventListener("click",function(e){"a"===e.target.tagName.toLowerCase()&&(e.preventDefault(),window.history.pushState(null,"",e.target.href),this.open(e.target.pathname))}.bind(this)),console.log(window.location.pathname),this.open(window.location.pathname)}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(8),a=(r=o)&&r.__esModule?r:{default:r};var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.status=!0,n.wrapper=document.createElement("div");var r="input";return"submit"===e.type&&(r="button"),n.wrapper.innerHTML+=generateInput({type:e.type,placeholder:e.placeholder,value:e.value,id:e.id,error_id:e.id.concat("_error"),CLASS:r}),n.ErrorElement=n.wrapper.getElementsByTagName("div")[0],n.InputElement=n.wrapper.getElementsByTagName("input")[0],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"render",value:function(){return this.wrapper}},{key:"getState",value:function(){return this.status}},{key:"getData",value:function(){return this.InputElement.value}},{key:"getFormData",value:function(){return this.InputElement}},{key:"setError",value:function(e){e?(this.status=!1,this.ErrorElement.innerHTML=e,this.InputElement.classList.add("input__error")):(this.status=!0,this.ErrorElement.style.display="none",this.InputElement.classList.remove("input__error"))}},{key:"setOnInputChange",value:function(e){this.InputElement.addEventListener("change",function(t){t.preventDefault(),e()})}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={DEFAULT:1,READY:2,DISABLED:3,WON:4,LOSE:5}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(8),a=(r=o)&&r.__esModule?r:{default:r};var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.formElement=document.createElement("form"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"render",value:function(){}},{key:"reset",value:function(){this.formElement.reset()}},{key:"setOnSubmit",value:function(){}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"checkMail",value:function(e){var t=e.getData();!1===/([\w-]+)@([\w-]+)(\.[\w]+)/.test(t)?e.setError("incorrect email"):e.setError(null)}},{key:"checkName",value:function(e){var t=e.getData();/^[a-zA-Z0-9_-]{3,16}$/.test(t)?e.setError(null):e.setError("incorrect name")}},{key:"checkPass",value:function(e){e.getData().length<8?e.setError("too short password"):e.setError(null)}},{key:"checkConfirm",value:function(e,t){e.getData()!==t.getData()?t.setError("passwords do not match"):t.setError(null)}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"render",value:function(){}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={serverUrl:"https://rha-backend.herokuapp.com/",userAPIMethods:{login:"users/auth",signup:"users/create",logout:"users/logout",user:"users/info",updateUser:"users/chpwd",leaderBoard:"users/rating",updateAvatar:"users/chava"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(11)),o=u(n(0)),a=u(n(26));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.listeners(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"listeners",value:function(){var e=this;o.default.on("bot-move",function(t){if(t.payload.name===e.name){for(var n=[],r=0;r<e.regions.length;r++)0!==e.regions[r].neighbour.length&&n.push(e.regions[r]);var i=(0,a.default)(0,n.length-1);o.default.emit("bot-attack",{from:n[i],to:n[i].neighbour[(0,a.default)(0,n[i].neighbour.length-1)]}),o.default.emit("bot-change-move","bot")}})}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(5),a=(r=o)&&r.__esModule?r:{default:r};var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.score=0,this.resources=0,this.regions=[],this.status=a.default.DISABLED,this.color=n,this.name=t}return i(e,[{key:"init",value:function(){}},{key:"isTheRegionOfPlayer",value:function(e){for(var t=0;t<this.regions.length;++t)if(this.regions[t].name===e.name)return!0;return!1}},{key:"addRegion",value:function(e){e.area.setColor(this.color),e.area.reColor(this.color),e.owner=this,this.regions.push(e)}},{key:"delRegion",value:function(e){for(var t=0;t<this.regions.length;++t)this.regions[t]===e&&this.regions.splice(t,1);0===this.regions.length&&(this.status=a.default.LOSE)}},{key:"setStatus",value:function(e){this.status=e}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(11)),i=o(n(5));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.status=i.default.DEFAULT,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(8),a=(r=o)&&r.__esModule?r:{default:r};var u=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.buttonWrapper=document.createElement("div"),i.buttonElement=document.createElement("button"),i.buttonElement.classList.add("btn-style"),i.buttonElement.classList.add("button"),i.buttonElement.innerHTML=n,i.buttonElement.type=e,r&&r.appendChild(i.buttonWrapper),i.buttonWrapper.classList.add("page-button"),i.buttonWrapper.appendChild(i.buttonElement),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"render",value:function(){return this.buttonWrapper}},{key:"hide",value:function(){this.buttonWrapper.classList.add("hidden")}},{key:"show",value:function(){this.buttonWrapper.classList.remove("hidden")}},{key:"setOnClick",value:function(e){this.buttonElement.addEventListener("click",function(t){t.preventDefault(),e()})}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(9),a=(r=o)&&r.__esModule?r:{default:r};var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"get",value:function(e,t){return this.request("GET",e).then(function(e){if(200===e.status)try{t(null,e.json())}catch(e){console.error("get error: ",e)}else t(e,null)})}},{key:"post",value:function(e,t,n){return this.request("POST",e,t).then(function(e){if(e.status<300)try{n(null,e.json())}catch(e){console.error("post error: ",e),n(e)}else n(e)})}},{key:"request",value:function(e,t,n){var r=new Headers;"POST"===e&&"users/chava"!==t&&r.append("Content-Type","application/json; charset=utf-8");var i={method:e,headers:r,body:n,credentials:"include",mode:"cors"};return"users/chava"===t?fetch("http://localhost:5000/users/chava",i):fetch(""+a.default.serverUrl+t,i)}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=1e3,o=610,a=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.__instance)return e.__instance;e.__instance=this,this.game_canvas=t,this.xSize=t.width/i,this.ySize=t.height/o,this.lengthSide=90,this.allowedCoord=[{name:"A",x:365*this.xSize,y:345*this.ySize,allowed:!0,neighbour:["B","C","D"]},{name:"B",x:(321+2*this.lengthSide)*this.xSize,y:(345-.86*this.lengthSide)*this.ySize,allowed:!0,neighbour:["A","C","D","E"]},{name:"C",x:365*this.xSize,y:(345-.86*this.lengthSide*2)*this.ySize,allowed:!0,neighbour:["A","B"]},{name:"D",x:(321+2*this.lengthSide)*this.xSize,y:(345+.86*this.lengthSide)*this.ySize,allowed:!0,neighbour:["A","B","E"]},{name:"E",x:(321+2*this.lengthSide+136)*this.xSize,y:345*this.ySize,allowed:!0,neighbour:["B","D"]}]}return r(e,[{key:"reSize",value:function(e){this.xSize=e.width/i,this.ySize=e.height/o,this.allowedCoord=[{name:"A",x:365*this.xSize,y:345*this.ySize,allowed:!0,neighbour:["B","C","D"]},{name:"B",x:(321+2*this.lengthSide)*this.xSize,y:(345-.86*this.lengthSide)*this.ySize,allowed:!0,neighbour:["A","C","D","E"]},{name:"C",x:365*this.xSize,y:(345-.86*this.lengthSide*2)*this.ySize,allowed:!0,neighbour:["A","B"]},{name:"D",x:(321+2*this.lengthSide)*this.xSize,y:(345+.86*this.lengthSide)*this.ySize,allowed:!0,neighbour:["A","B","E"]},{name:"E",x:(321+2*this.lengthSide+136)*this.xSize,y:345*this.ySize,allowed:!0,neighbour:["B","D"]}]}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.aboutRegion=function(e,t){t.innerText="",t.innerText+="name: ",t.innerText+=e.name,t.innerText+=" \n",t.innerText+="region: ",t.innerText+=e.gameData.units}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n,r){for(var i=n.length,o=i-1,a=!1,u=0;u<i;u++)(r[u]<=t&&t<r[o]||r[o]<=t&&t<r[u])&&e>(n[o]-n[u])*(t-r[u])/(r[o]-r[u])+n[u]&&(a=!a),o=u;return a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(17)),o=s(n(0)),a=s(n(5)),u=n(16);function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.game_ctx=t.getContext("2d"),this.players=n,this.regions=r,this.about_region=document.getElementById("about-region"),this.setPlayersRegions()}return r(e,[{key:"currentPlayer",value:function(){for(var e=0;e<this.players.length;++e)if(this.players[e].status!==a.default.DISABLED)return this.players[e]}},{key:"nextPlayer",value:function(){for(var e=this.currentPlayer(),t=0;t<this.players.length;++t)if(this.players[t]===e)return t=(t+1)%this.players.length,this.players[t]}},{key:"isRegion",value:function(e,t){for(var n=0;n<this.regions.length;++n)if((0,i.default)(e,t,this.regions[n].area.xp,this.regions[n].area.yp))return this.regions[n];return null}},{key:"isNeighbour",value:function(e,t){for(var n=0;n<e.neighbour.length;n++)if(t.label===e.neighbour[n])return!0;return!1}},{key:"activeRegion",value:function(){for(var e=0;e<this.regions.length;++e)if(!0===this.regions[e].selected)return this.regions[e]}},{key:"deactivatePlayers",value:function(){this.players.forEach(function(e){return e.active=!1})}},{key:"setPlayersRegions",value:function(){for(var e=0;e<this.players.length;e++)this.players[e].addRegion(this.regions[e])}},{key:"isElementOfChangeCanvas",value:function(e,t){return!!(0,i.default)(e,t,this.switcher.arrX,this.switcher.arrY)}},{key:"onListeners",value:function(){var e=this;o.default.on("left-click",function(t){var n=e.currentPlayer(),r=t.payload;if(n.status!==a.default.DISABLED){var i=e.isRegion(r.x,r.y);if(i)switch(console.log(i.neighbour),n.status){case a.default.DEFAULT:if(!n.isTheRegionOfPlayer(i))return;n.status=a.default.READY,(0,u.aboutRegion)(i,e.about_region),o.default.emit("select-region",i);break;case a.default.READY:if(!e.currentPlayer().isTheRegionOfPlayer(i))return;i===e.activeRegion()&&(n.status=a.default.DEFAULT),(0,u.aboutRegion)(i,e.about_region),o.default.emit("change-selection",{active:e.activeRegion(),new:i})}}}),o.default.on("contextmenu",function(t){var n=e.currentPlayer(),r=e.activeRegion(),i=t.payload;if(n.status!==a.default.DISABLED&&n.status===a.default.READY){var s=e.isRegion(i.x,i.y);if(s)if(n.isTheRegionOfPlayer(s))s.gameData.units+=r.gameData.units,r.gameData.units=0,o.default.emit("change-selection",{active:e.activeRegion(),new:s}),(0,u.aboutRegion)(s,e.about_region);else{if(!1===e.isNeighbour(r,s))return;o.default.emit("attack",{from:e.activeRegion(),to:s})}}}),o.default.on("left-click-change",function(){var t=e.currentPlayer(),n=e.nextPlayer();t.status!==a.default.DISABLED&&o.default.emit("change-move",{current:t,next:n})}),o.default.on("bot-attack",function(t){for(var n=t.payload,r=0;r<e.regions.length;++r)n.to===e.regions[r].label&&o.default.emit("attack",{from:n.from,to:e.regions[r]})}),o.default.on("bot-change-move",function(){o.default.emit("change-move",{current:e.currentPlayer(),next:e.nextPlayer()})}),o.default.on("delete-from-queue",function(t){var n=t.payload;e.players.forEach(function(t,r){t===n&&e.players.splice(r,1)})})}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=(r=o)&&r.__esModule?r:{default:r};var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game_canvas=t,this.changeBut=n,this.onclick=function(e){a.default.emit("left-click",{x:e.offsetX,y:e.offsetY})},this.mousemove=function(e){a.default.emit("mousemove",{x:e.offsetX,y:e.offsetY})},this.contextmenu=function(e){e.preventDefault(),a.default.emit("contextmenu",{x:e.offsetX,y:e.offsetY})},this.clickChangeBut=function(e){a.default.emit("left-click-change",{})}}return i(e,[{key:"start",value:function(){this.game_canvas.addEventListener("click",this.onclick),this.game_canvas.addEventListener("mousemove",this.mousemove),this.game_canvas.addEventListener("contextmenu",this.contextmenu),this.changeBut.addEventListener("click",this.clickChangeBut)}},{key:"stop",value:function(){this.game_canvas.removeEventListener("click",this.onclick),this.game_canvas.removeEventListener("mousemove",this.mousemove),this.game_canvas.removeEventListener("contextmenu",this.contextmenu),this.changeBut.removeEventListener("click",this.clickChangeBut)}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.battleCalc=function(e,t){return e.gameData.units-2*t.gameData.units>0?(e.gameData.units-=2*t.gameData.units,t.gameData.units=0,!0):(t.gameData.units-=e.gameData.units/2,e.gameData.units=0,!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timer=void 0;var r,i=n(0),o=(r=i)&&r.__esModule?r:{default:r};t.timer=function(e){var t=30,n=setInterval(function(){e.innerHTML=--t,0===t&&(clearInterval(n),o.default.emit("left-click-change",{}))},1e3);o.default.on("left-click-change",function(){clearInterval(n)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n(0)),o=c(n(5)),a=c(n(12)),u=c(n(10)),s=n(21),l=n(20);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controller=t,this.timer=document.getElementById("timer"),(0,s.timer)(this.timer)}return r(e,[{key:"start",value:function(){var e=this;i.default.on("select-region",function(e){var t=e.payload;t.selected=!0,t.area.reDraw("red",2)}),i.default.on("change-selection",function(e){var t=e.payload;t.active.selected=!1,t.new.selected=!0,t.new.area.reDraw("red",2),t.active.area.reDraw("black",2)}),i.default.on("attack",function(e){var t=e.payload,n=t.from,r=t.to;(0,l.battleCalc)(n,r)&&(r.setColor(n.getColor()),r.owner.delRegion(r),0===r.owner.regions.length&&(r.owner.setStatus(o.default.DISABLED),i.default.emit("delete-from-queue",r.owner)),i.default.emit("update-neighbour",{from:n,to:r}),n.owner.addRegion(r))}),i.default.on("change-move",function(t){var n=t.payload;n.current.setStatus(o.default.DISABLED),n.next.setStatus(o.default.DEFAULT),n.next instanceof a.default?((0,s.timer)(e.timer),e.controller.start()):n.next instanceof u.default?(e.controller.stop(),i.default.emit("bot-move",n.next)):e.controller.stop()})}},{key:"destroy",value:function(){i.default.off("select-region",function(e){var t=e.payload;t.selected=!0,t.area.reDraw("red",3)}),i.default.off("change-selection",function(e){var t=e.payload;t.active.selected=!1,t.new.selected=!0,t.new.area.reDraw("red",3),t.active.area.reDraw("black",3)})}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.reachMatrix=[[0,1,1,1,0],[1,0,1,1,1],[1,1,0,0,0],[1,1,0,0,1],[0,1,0,1,0]]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=(r=o)&&r.__esModule?r:{default:r};var u=function(){function e(t,n,r,i,o,u){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.canvas=n,this.game_ctx=this.canvas.getContext("2d"),this.draw(r,i,o),this.xC=r,this.yC=i,this.color=o,this.strokeColor="black",a.default.on("resize-for-draw",function(){for(var e=0;e<u.allowedCoord.length;e++)if(u.allowedCoord[e].name===s.name){s.xC=u.allowedCoord[e].x,s.yC=u.allowedCoord[e].y;break}s.draw(s.xC,s.yC,s.color)})}return i(e,[{key:"setColor",value:function(e){this.color=e}},{key:"getColor",value:function(){return this.color}},{key:"draw",value:function(e,t,n){this.R=90,this.dR=.866*this.R,this.xp=[e-this.R*this.canvas.width/1e3,e-this.R/2*this.canvas.width/1e3,e+this.R/2*this.canvas.width/1e3,e+this.R*this.canvas.width/1e3,e+this.R/2*this.canvas.width/1e3,e-this.R/2*this.canvas.width/1e3,e-this.R*this.canvas.width/1e3],this.yp=[t,t+this.dR*this.canvas.height/610,t+this.dR*this.canvas.height/610,t,t-this.dR*this.canvas.height/610,t-this.dR*this.canvas.height/610,t],this.game_ctx.beginPath(),this.game_ctx.lineJoin="round",this.game_ctx.lineWidth=4,this.game_ctx.moveTo(this.xp[0],this.yp[0]);for(var r=1;r<this.xp.length;++r)this.game_ctx.lineTo(this.xp[r],this.yp[r]);this.game_ctx.strokeStyle=this.strokeColor,this.game_ctx.stroke(),this.game_ctx.fillStyle="rgba(100,150,185,0.4)",this.game_ctx.fill(),this.game_ctx.closePath()}},{key:"reDraw",value:function(e,t){this.xp=[this.xC-this.R*this.canvas.width/1e3,this.xC-this.R/2*this.canvas.width/1e3,this.xC+this.R/2*this.canvas.width/1e3,this.xC+this.R*this.canvas.width/1e3,this.xC+this.R/2*this.canvas.width/1e3,this.xC-this.R/2*this.canvas.width/1e3,this.xC-this.R*this.canvas.width/1e3],this.yp=[this.yC,this.yC+this.dR*this.canvas.height/610,this.yC+this.dR*this.canvas.height/610,this.yC,this.yC-this.dR*this.canvas.height/610,this.yC-this.dR*this.canvas.height/610,this.yC],this.game_ctx.beginPath(),this.game_ctx.lineWidth=2,this.game_ctx.moveTo(this.xp[0],this.yp[0]);for(var n=1;n<this.xp.length;++n)this.game_ctx.lineTo(this.xp[n],this.yp[n]);this.game_ctx.strokeStyle=e,this.strokeColor=e,this.game_ctx.stroke(),this.game_ctx.closePath()}},{key:"reColor",value:function(e){this.xp=[this.xC-this.R*this.canvas.width/1e3,this.xC-this.R/2*this.canvas.width/1e3,this.xC+this.R/2*this.canvas.width/1e3,this.xC+this.R*this.canvas.width/1e3,this.xC+this.R/2*this.canvas.width/1e3,this.xC-this.R/2*this.canvas.width/1e3,this.xC-this.R*this.canvas.width/1e3],this.yp=[this.yC,this.yC+this.dR*this.canvas.height/610,this.yC+this.dR*this.canvas.height/610,this.yC,this.yC-this.dR*this.canvas.height/610,this.yC-this.dR*this.canvas.height/610,this.yC],this.game_ctx.beginPath(),this.game_ctx.moveTo(this.xp[0],this.yp[0]);for(var t=1;t<this.xp.length;++t)this.game_ctx.lineTo(this.xp[t],this.yp[t]);this.game_ctx.strokeStyle="black",this.game_ctx.stroke(),this.game_ctx.fillStyle="rgba(100,150,185,0.4)",this.game_ctx.fill(),this.game_ctx.closePath()}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(24)),o=n(23),a=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t,n,r,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.canvas=r,this.game_ctx=this.canvas.getContext("2d"),this.selected=!1,this.allowedCoordinates=i.allowedCoord,this.coordinate=i,this.owner=n,this.color=n.color,this.gameData={units:o},this.setBusListeners(),this.area=null,this.label=null,this.globalRegions=null,this.neighbour=null,this.number=null,this.init()}return r(e,[{key:"setColor",value:function(e){this.area.setColor(e)}},{key:"getColor",value:function(){return this.area.getColor()}},{key:"setGlobalRegions",value:function(e){this.globalRegions=e}},{key:"init",value:function(){for(var e=0;e<this.allowedCoordinates.length;++e)if(this.allowedCoordinates[e].allowed)return this.area=new i.default(this.allowedCoordinates[e].name,this.canvas,this.allowedCoordinates[e].x,this.allowedCoordinates[e].y,this.color,this.coordinate),this.number=e,this.neighbour=this.allowedCoordinates[e].neighbour,this.label=this.allowedCoordinates[e].name,void(this.allowedCoordinates[e].allowed=!1)}},{key:"setNeighbours",value:function(e){var t=this;o.reachMatrix[e].forEach(function(e){1===e&&t.neighbour.push(e+1)})}},{key:"setBusListeners",value:function(){var e=this;a.default.on("update-neighbour",function(t){var n=t.payload;n.from.name===e.name?e.removeNeighbour(n.to.name):n.to.name===e.name?(n.from.owner.regions.forEach(function(t){e.removeNeighbour(t.name)}),n.to.owner.regions.forEach(function(e){if(1===o.reachMatrix[n.to.number][e.number]){for(var t=!1,r=0;r<n.to.neighbour.length;++r)n.to.neighbour[r]===e.name&&(t=!0);!1===t&&n.to.neighbour.push(e.name)}})):e.globalRegions.forEach(function(t){if(t.name!==n.to.name||1!==o.reachMatrix[e.number][t.number]);else{for(var r=!1,i=0;i<e.neighbour.length;++i)e.neighbour[i]===n.to.name&&(r=!0);!1===r&&e.neighbour.push(n.to.name)}})}),a.default.on("change-move",function(t){e.gameData.units+=1e3})}},{key:"removeNeighbour",value:function(e){var t=this;this.neighbour.forEach(function(n,r){n===e&&t.neighbour.splice(r,1)}),console.log(this.name,"  ",this.neighbour)}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return Math.floor(Math.random()*(t-e))+e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n(12)),o=c(n(10)),a=c(n(25)),u=c(n(22)),s=c(n(19)),l=c(n(18));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t,n,r,c){var f=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mode=t,this.game_canvas=n,this.coordinate=r,this.game_ctx=this.game_canvas.getContext("2d"),this.controller=new s.default(this.game_canvas,c),this.players=[new i.default("A","green"),new o.default("B","blue"),new o.default("C","crimson"),new o.default("D","silver"),new o.default("E","yellow")],this.regions=[],this.players.forEach(function(e,t,n){f.regions.push(new a.default(e.name,e,f.game_canvas,f.coordinate,1e3*(n.length-t)))}),this.regions.forEach(function(e){e.setGlobalRegions(f.regions)}),this.scene=new l.default(this.game_canvas,this.players,this.regions),this.manager=new u.default(this.controller)}return r(e,[{key:"start",value:function(){this.controller.start(),this.scene.onListeners(),this.manager.start()}},{key:"destroy",value:function(){this.controller.stop(),this.manager.destroy()}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(2)),a=l(n(27)),u=l(n(0)),s=l(n(15));l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.parent=document.getElementById("game"),e.wrapper=document.createElement("div"),e.wrapper.classList.add("wrapper"),console.log(screen.width," ",document.documentElement.clientWidth),e.wrapper.innerHTML+=generateCanvas({width:.7*window.innerWidth,height:.525*window.innerWidth*.83,id:"game-canvas"}),e.parent.appendChild(e.wrapper),e.game_canvas=document.getElementById("game-canvas"),e.ctx=e.game_canvas.getContext("2d"),e.img=new Image,e.img.src="/map.png",e.img.onload=function(){e.ctx.drawImage(e.img,0,0,e.game_canvas.width,e.game_canvas.height),u.default.emit("load-img",{})},u.default.on("load-img",function(){e.coordinate=new s.default(e.game_canvas),e.setWindowResizeHandler()}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),i(t,[{key:"render",value:function(){var e=this;return u.default.on("load-img",function(){e.changeBut=e.wrapper.getElementsByClassName("change")[0],e.game=new a.default({},e.game_canvas,e.coordinate,e.changeBut),e.game.start()}),this.wrapper}},{key:"allowed",value:function(){return!0}},{key:"computeCanvasSize",value:function(){return[.7*window.innerWidth,.525*window.innerWidth*.83]}},{key:"setWindowResizeHandler",value:function(){var e=this;return window.addEventListener("resize",function(){var t=e.computeCanvasSize(),n=r(t,2);e.game_canvas.width=n[0],e.game_canvas.height=n[1],e.ctx.drawImage(e.img,0,0,e.game_canvas.width,e.game_canvas.height),e.coordinate.reSize(e.game_canvas),u.default.emit("resize-for-draw",{})}),this}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(2)),o=s(n(0)),a=s(n(3)),u=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.sign(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"render",value:function(){return this.menu=document.createElement("div"),this.attrsActive=[{title:"singleplayer",href:"/singleplayer"},{title:"multiplayer",href:"#"},{title:"profile",href:"/profile"},{title:"rating",href:"/rating"}],this.attrPassive=[{title:"singleplayer",href:"/singleplayer"},{title:"Sign In",href:"/login"},{title:"Sign Up",href:"/register"}],u.default.isAuthorized()?(this.menu.innerHTML=generateMenu({attrs:this.attrsActive}),this.logout=document.createElement("a"),this.logout.setAttribute("href","/"),this.logout.innerText="logout",this.logout.addEventListener("click",function(e){e.preventDefault(),o.default.emit("logout",null)}),this.logoutWrapper=document.createElement("div"),this.logoutWrapper.classList.add("button"),this.logoutWrapper.appendChild(this.logout),this.menu.appendChild(this.logoutWrapper)):this.menu.innerHTML=generateMenu({attrs:this.attrPassive}),this.menu}},{key:"allowed",value:function(){return!0}},{key:"sign",value:function(){var e=this;o.default.on("user:authorized",function(){e.allow=!0,(new a.default).open("/menu")}),o.default.on("user:unauthorized",function(){e.allow=!1}),o.default.on("menu:hide",function(){e.hide()})}},{key:"hide",value:function(){this.menu.setAttribute("hidden","hidden")}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(6)),o=u(n(4)),a=u(n(7));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"getData",value:function(){var e=this.Email.getData(),t=this.Password.getData();return""===e||""===t?null:{email:e,password:t}}},{key:"render",value:function(){var e=this;return this.Email=new o.default({type:"text",placeholder:"email",id:"loginEmail"}),this.Password=new o.default({type:"password",placeholder:"password",id:"loginPassword"}),this.InputSubmit=new o.default({type:"submit",value:"Sign In",id:"loginSubmit"}),this.Email.setOnInputChange(function(){a.default.checkMail(e.Email)}),this.Password.setOnInputChange(function(){a.default.checkPass(e.Password)}),this.formElement.appendChild(this.Email.render()),this.formElement.appendChild(this.Password.render()),this.formElement.appendChild(this.InputSubmit.render()),this.formElement}},{key:"setOnSubmit",value:function(e){this.formElement.addEventListener("submit",function(t){t.preventDefault(),e()})}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(2)),o=s(n(30)),a=s(n(0)),u=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.sign(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"render",value:function(){var e=this;return this.login=document.createElement("div"),this.login.innerHTML=generateLogin(),this.after=this.login.getElementsByClassName("button")[0],this.loginForm=new o.default,this.login.firstChild.insertBefore(this.loginForm.render(),this.after),this.loginForm.setOnSubmit(function(){var t=e.loginForm.getData();if(null!==t){var n=JSON.stringify(t);console.log(n),a.default.emit("user:login",n)}else e.loginForm.Email.setError("empty fields")}),this.login}},{key:"allowed",value:function(){return!u.default.isAuthorized()}},{key:"sign",value:function(){var e=this;a.default.on("login-error",function(t){e.loginForm.Email.setError(t.payload)})}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(6)),o=u(n(4)),a=u(n(7));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"render",value:function(){var e=this;return this.Email=new o.default({type:"text",placeholder:"email",id:"registerEmail"}),this.Name=new o.default({type:"text",placeholder:"name",id:"registerName"}),this.Password=new o.default({type:"password",placeholder:"password",id:"registerPass"}),this.ConfirmPassword=new o.default({type:"password",placeholder:"confirm password",id:"registerPass2"}),this.InputSubmit=new o.default({type:"submit",value:"Sign Up",id:"registerSubmit"}),this.Email.setOnInputChange(function(){a.default.checkMail(e.Email)}),this.Name.setOnInputChange(function(){a.default.checkName(e.Name)}),this.Password.setOnInputChange(function(){a.default.checkPass(e.Password)}),this.ConfirmPassword.setOnInputChange(function(){a.default.checkConfirm(e.Password,e.ConfirmPassword)}),this.formElement.appendChild(this.Email.render()),this.formElement.appendChild(this.Name.render()),this.formElement.appendChild(this.Password.render()),this.formElement.appendChild(this.ConfirmPassword.render()),this.formElement.appendChild(this.InputSubmit.render()),this.formElement}},{key:"getData",value:function(){var e=this.Name.getData(),t=this.Email.getData(),n=this.Password.getData();return""===e||""===t||""===n?null:{username:e,email:t,password:n}}},{key:"setOnSubmit",value:function(e){this.formElement.addEventListener("submit",function(t){t.preventDefault(),e()})}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(2)),o=s(n(32)),a=s(n(0)),u=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return u.default.isAuthorized(),e.sign(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"render",value:function(){var e=this;return this.register=document.createElement("div"),this.register.innerHTML=generateRegister(),this.registerForm=new o.default,this.after=this.register.getElementsByClassName("button")[0],this.register.firstChild.insertBefore(this.registerForm.render(),this.after),this.registerForm.setOnSubmit(function(){var t=e.registerForm.getData();if(console.log(t),null!==t){var n=JSON.stringify(t);a.default.emit("user:signup",n),a.default.on("signup-error",function(t){e.registerForm.Email.setError(t.payload)})}else e.registerForm.Email.setError("Empty fields")}),this.register}},{key:"allowed",value:function(){return!u.default.isAuthorized()}},{key:"sign",value:function(){var e=this;a.default.on("signup-error",function(t){e.registerForm.Email.setError(t.payload)})}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(n(14)),o=l(n(9)),a=l(n(0)),u=l(n(3)),s=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var c=new(function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.__instance)return e.__instance;a.default.on("user:signup",function(e){var t=e.payload;s.default.signUp(t).then(function(){(new u.default).open("/")}).catch(function(e){a.default.emit("signup-error",e)})}),a.default.on("logout",function(){s.default.logout().then(function(){(new u.default).open("/")}).catch(function(e){a.default.emit("logout-error",e)})}),a.default.on("user:login",function(e){var t=e.payload;s.default.signIn(t).then(function(){(new u.default).open("/")}).catch(function(e){a.default.emit("login-error",e)})}),a.default.on("user:update",function(e){var t=e.payload;s.default.update(t).then(function(){(new u.default).open("/")}).catch(function(e){a.default.emit("update-error",e)})}),a.default.on("user:avatarUpload",function(e){var t=e.payload;console.log(t),s.default.uploadAvatar(t).then(function(){(new u.default).open("/profile")}).catch(function(e){console.log(e)})}),e.__instance=this}return r(e,[{key:"rating",value:function(e,t){return i.default.get(o.default.userAPIMethods.leaderBoard+"/"+e.toString(),t)}}]),e}());t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(2)),o=s(n(34)),a=(s(n(13)),s(n(0))),u=(s(n(3)),s(n(1)));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.page=1,e.sign(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"render",value:function(){var e=this;return this.rating=document.createElement("div"),this.rating.innerHTML="",this.paginationWrap=document.createElement("div"),this.paginationWrap.classList.add("pagination"),this.prevButt=document.createElement("a"),this.prevButt.innerText="<",this.prevButt.addEventListener("click",function(t){t.preventDefault(),e.rating.removeChild(e.rating.firstChild),e.page--,e.prevButt.hidden=1===e.page,e.nextButt.hidden=!1,e.load(e.page)}),this.nextButt=document.createElement("a"),this.nextButt.innerText=">",this.nextButt.addEventListener("click",function(t){t.preventDefault(),e.rating.removeChild(e.rating.firstChild),e.page++,1!==e.page&&(e.prevButt.hidden=!1),e.load(e.page,function(t){t&&(e.nextButt.hidden=!0,e.lastPage=document.createElement("div"),e.lastPage.innerText="This is the last page",e.rating.insertBefore(e.lastPage,e.rating.firstChild))})}),this.prevButt.hidden=1===this.page,this.paginationWrap.appendChild(this.prevButt),this.paginationWrap.appendChild(this.nextButt),this.backButtWrap=document.createElement("div"),this.backButtWrap.classList.add("button"),this.backButtWrap.classList.add("back-button"),this.backButt=document.createElement("a"),this.backButt.setAttribute("href","/"),this.backButt.innerText="Back to menu",this.backButtWrap.appendChild(this.backButt),this.load(1,function(){}),this.rating.appendChild(this.paginationWrap),this.rating.appendChild(this.backButtWrap),this.rating}},{key:"load",value:function(e,t){var n=this;console.log(e),o.default.rating(e,function(r,i){if(r)return console.error(r),void t(!0);console.log(r,i),i.then(function(t){n.table=document.createElement("div"),n.table.innerHTML=generateRating({data:t[0],user:t[1][0],pages:t[2][0],page:e}),n.rating.insertBefore(n.table,n.rating.firstChild)})})}},{key:"sign",value:function(){var e=this;a.default.on("user:authorized",function(t){e.allowed=!0}),a.default.on("user:unauthorized",function(t){e.allowed=!1})}},{key:"allowed",value:function(){return u.default.isAuthorized()}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(n(6)),o=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"getData",value:function(){var e=this.UploadInput.getFormData();return""===e?null:{avatar:e}}},{key:"render",value:function(){return this.UploadInput=new o.default({type:"file",placeholder:"",id:"loadImageInput"}),this.UploadSubmit=new o.default({type:"submit",value:"Save picture",id:"loadImageSubmit"}),this.formElement.appendChild(this.UploadInput.render()),this.formElement.appendChild(this.UploadSubmit.render()),this.formElement.setAttribute("enctype","multipart/form-data"),this.formElement.setAttribute("name","form_loadFile"),this.formElement.classList.add("form-loadFile"),this.formElement}},{key:"setOnSubmit",value:function(e){this.formElement.addEventListener("submit",function(t){t.preventDefault(),e()})}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sectionSwitcher=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(37),a=(r=o)&&r.__esModule?r:{default:r};var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"changeSection",value:function(e,t){(0,a.default)(e,t)}}]),e}(),s=new u;t.sectionSwitcher=s,t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(6)),o=u(n(4)),a=u(n(7));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"getData",value:function(){return{oldp:this.OldPassword.getData(),newp:this.Password.getData()}}},{key:"render",value:function(){var e=this;return this.OldPassword=new o.default({type:"password",placeholder:"old password",id:"changeOld"}),this.Password=new o.default({type:"password",placeholder:"new password",id:"changeNew"}),this.RepeatPassword=new o.default({type:"password",placeholder:"repeat password",id:"changeRepeat"}),this.InputSubmit=new o.default({type:"submit",value:"Save",id:"changeSubmit"}),this.OldPassword.setOnInputChange(function(){a.default.checkPass(e.OldPassword)}),this.Password.setOnInputChange(function(){a.default.checkPass(e.Password)}),this.RepeatPassword.setOnInputChange(function(){a.default.checkConfirm(e.Password,e.RepeatPassword)}),this.formElement.appendChild(this.OldPassword.render()),this.formElement.appendChild(this.Password.render()),this.formElement.appendChild(this.RepeatPassword.render()),this.formElement.appendChild(this.InputSubmit.render()),this.formElement}},{key:"setOnSubmit",value:function(e){this.formElement.addEventListener("submit",function(t){t.preventDefault(),e()})}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=f(n(2)),o=f(n(39)),a=f(n(13)),u=f(n(0)),s=f(n(1)),l=f(n(3)),c=f(n(36));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.sign(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"render",value:function(){var e=this;return this.profileElement=document.createElement("div"),this.profileElement.classList.add("div__profile-wrapper"),this.attrs=s.default.getCurUser(),this.profileTable=document.createElement("div"),this.profileTable.innerHTML=generateProfile({user:this.attrs}),this.profileElement.appendChild(this.profileTable),this.profileElement.appendChild(document.createElement("hr")),this.fileForm=new c.default,this.profileElement.appendChild(this.fileForm.render()),this.changeForm=new o.default,this.profileElement.appendChild(this.changeForm.render()),this.backButt=new a.default("button","Back",this.profileElement),this.backButt.setOnClick(function(){(new l.default).open("/")}),this.changeForm.setOnSubmit(function(){var t=e.changeForm.getData(),n=JSON.stringify(t);u.default.emit("user:update",n)}),this.fileForm.setOnSubmit(function(){var e=document.getElementById("loadImageInput"),t=new FormData,n=e.files[0];t.append("image",n),u.default.emit("user:avatarUpload",t)}),this.profileElement}},{key:"allowed",value:function(){return s.default.isAuthorized()}},{key:"sign",value:function(){var e=this;u.default.on("update:error",function(t){e.changeForm.Email.setError(t.payload)})}}]),t}();t.default=h},function(e,t,n){"use strict";var r=f(n(40)),i=f(n(35)),o=f(n(33)),a=f(n(31)),u=f(n(29)),s=f(n(3)),l=f(n(1)),c=f(n(28));function f(e){return e&&e.__esModule?e:{default:e}}var h=document.getElementById("application"),d=document.getElementById("body");l.default.auth().then(function(){new s.default(h,d).add("/",u.default).add("/register",o.default).add("/profile",r.default).add("/rating",i.default).add("/login",a.default).add("/singleplayer",c.default).start()}).catch()},function(e,t,n){"use strict";var r=document.getElementById("radar"),i=Math.min(document.getElementById("radar-wrapper").offsetHeight,document.getElementById("radar-wrapper").offsetWidth)-100,o=i/2,a=Sketch.create({container:r,fullscreen:!1,width:i,height:i}),u=function(e){return e*(Math.PI/180)},s=270,l=Math.abs(50),c=a.createLinearGradient(o,0,0,0);r.style.marginLeft=r.style.marginTop=-i/2-14+"px",c.addColorStop(0,"hsla( 120, 50%, 40%, 1 )"),c.addColorStop(1,"hsla( 170, 50%, 40%, 0.1 )");a.clear=function(){a.globalCompositeOperation="destination-out",a.fillStyle="hsla( 0, 0%, 0%, 0.1 )",a.fillRect(0,0,i,i)},a.update=function(){s+=1.2},a.draw=function(){a.globalCompositeOperation="lighter",function(){var e;for(e=0;e<4;e++)a.beginPath(),a.arc(o,o,(o-1)/4*(e+1),0,TWO_PI,!1),a.strokeStyle="hsla("+(170-e*(l/4))+", 50%, 40%, 0.1)",a.lineWidth=2,a.stroke()}(),a.beginPath(),a.moveTo(o-1,2),a.lineTo(o-1,i-2),a.moveTo(2,o-1),a.lineTo(i-2,o-1),a.strokeStyle="hsla( 145, 50%, 40%, .03 )",a.stroke(),a.save(),a.translate(o,o),a.rotate(u(s)),a.beginPath(),a.moveTo(0,0),a.arc(0,0,o,u(-2),u(2),!1),a.closePath(),a.fillStyle=c,a.fill(),a.restore(),function(){var e;for(a.beginPath(),e=0;e<i;e+=2)a.moveTo(0,e+.5),a.lineTo(i,e+.5);a.lineWidth=1,a.strokeStyle="hsla( 0, 0%, 0%, .02 )",a.globalCompositeOperation="source-over",a.stroke()}()}},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n(70),n(68),n(66),n(64),n(62),n(60),n(58),n(56),n(54),n(52),n(50),n(48),n(46),n(44),n(42),n(41)}]);
//# sourceMappingURL=bundle.js.map